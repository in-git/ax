import{_ as H}from"./FormFooter-5NEaOLHv.js";import{r,g,h as L,p as R,k as A,j as M,d as v,o as p,e as y,w as l,f as m,a as e,u as t,B as q,m as P,q as V,s as Q,v as E,c as x,x as O,i as w,aW as W,K as N,S as J,L as X,ai as Y,ak as ue,_ as Z,aq as _e,as as ie,au as de,av as ce,F as me,n as re,t as pe}from"./index-HxNFWFwR.js";import{_ as ee}from"./SystemTable.vue_vue_type_script_setup_true_lang-1XGIZ7ZX.js";import{_ as te}from"./TableHead-D-Q4jVMf.js";import{F as ne}from"./Field-Vd8OBjEs.js";import{m as fe,c as ve}from"./tree-DYZ2AjDl.js";import{_ as be}from"./Operation.vue_vue_type_script_setup_true_lang-BzKfCqHW.js";const B=r(!1),u=r({tables:[],rows:[],info:{tableId:0,tableName:"",tableComment:"",className:"",tplCategory:"",tplWebType:"",packageName:"",moduleName:"",businessName:"",functionName:"",functionAuthor:"",genType:"",genPath:"",columns:[],sub:!1,tree:!1,crud:!1,createBy:"",createTime:"",updateBy:""}}),K=r(),$=r(!1),ge=a=>g.get("tool/gen/list",{params:a}),ye=a=>g.get(`tool/gen/${a}`),xe=a=>g.delete(`tool/gen/${a.join(",")}`),ke=a=>g.get(`tool/gen/synchDb/${a}`),Ne=a=>g.get("tool/gen/db/list",{params:a}),$e=a=>g.post(`tool/gen/importTable?tables=${a.join(",")}`),C=r({rowKey:"tableId",data:[],loading:!1,moduleName:"code"}),j=r({pageNum:1,pageSize:10,total:0}),b=r([]),Ce=[{label:"同步",key:"edit",icon:L(R),onClick(){K.value&&A(ke,K.value.tableName)}},{label:"删除",key:"delete",icon:L(M),onClick(){oe()}}],U=async()=>{C.value.loading=!0;const{data:a}=await ge(j.value);C.value.data=a.rows,j.value.total=a.total,C.value.loading=!1},ae=async a=>{let d=a||b.value[0];const{data:n}=await ye(d);n.data&&(u.value=n.data),B.value=!0},oe=async a=>{let d=a?[a]:b.value;await A(xe,d),U()},I=r({rowKey:"tableName",data:[],loading:!1,moduleName:"db"}),h=r({pageNum:1,pageSize:10,total:0}),D=r([]);L(M);const F=async()=>{I.value.loading=!0;const{data:a}=await Ne(h.value);I.value.data=a.rows,h.value.total=a.total,I.value.loading=!1},le=async a=>{let d=a?[a]:D.value;await A($e,d),await U(),$.value=!1},G=r([{title:"创建者",dataIndex:"createBy"},{title:"更新时间",dataIndex:"updateTime"},{title:"类名",dataIndex:"className"},{title:"模板分类",dataIndex:"tplCategory"},{title:"包名",dataIndex:"packageName"},{title:"模块名",dataIndex:"moduleName"},{title:"业务名",dataIndex:"businessName"},{title:"函数名",dataIndex:"functionName"},{title:"函数作者",dataIndex:"functionAuthor"},{title:"生成类型",dataIndex:"genType"},{title:"生成路径",dataIndex:"genPath"}]),Ie={class:"flex justify-between"},he={class:"flex gc-4 align-center"},we={class:"flex"},Ue=v({__name:"head",setup(a){return(d,n)=>{const _=R,o=q,s=P,c=V,i=Q,k=te;return p(),y(k,{title:"待导入的列表"},{default:l(()=>[m("div",Ie,[m("div",he,[e(s,{title:"刷新"},{default:l(()=>[e(o,{type:"link",onClick:t(F)},{default:l(()=>[e(_)]),_:1},8,["onClick"])]),_:1}),e(c,{type:"vertical"}),e(i,{"allow-clear":"",onSearch:t(F)},null,8,["onSearch"])])]),m("div",we,[e(ne,{columns:t(G),"module-name":t(I).moduleName},null,8,["columns","module-name"])])]),_:1})}}}),Te=r([{title:"表名称",dataIndex:"tableName"},{title:"表注释",dataIndex:"tableComment"}]),Be=v({__name:"table",setup(a){return E(()=>{F()}),(d,n)=>{const _=W,o=q;return p(),x("div",null,[e(Ue),e(ee,{columns:t(Te),table:t(I),query:t(h),"onUpdate:query":n[0]||(n[0]=s=>w(h)?h.value=s:null),"selected-keys":t(D),"onUpdate:selectedKeys":n[1]||(n[1]=s=>w(D)?D.value=s:null),onReload:t(F)},{default:l(({value:s})=>[s.column.dataIndex==="operation"?(p(),y(o,{key:0,type:"text",onClick:c=>t(le)(s.record.tableName)},{default:l(()=>[e(_)]),_:2},1032,["onClick"])):O("",!0)]),_:1},8,["columns","table","query","selected-keys","onReload"])])}}}),De={class:"h-100 flex flex-col relative"},Fe=v({__name:"db",setup(a){return(d,n)=>{const _=q,o=H;return p(),y(J,{title:"导入表",visible:t($),"onUpdate:visible":n[1]||(n[1]=s=>w($)?$.value=s:null)},{default:l(()=>[m("div",De,[e(Be),e(o,{justify:"right"},{default:l(()=>[e(_,{type:"primary",onClick:n[0]||(n[0]=s=>t(le)())},{default:l(()=>[N("导入")]),_:1})]),_:1})])]),_:1},8,["visible"])}}}),qe={key:0,class:"mt-12"},Oe=v({__name:"BaseInfo",setup(a){return(d,n)=>{var c;const _=X,o=Y,s=ue;return(c=t(u))!=null&&c.info?(p(),x("div",qe,[e(o,{name:"tableName",required:"",label:"表名"},{default:l(()=>[e(_,{value:t(u).info.tableName,"onUpdate:value":n[0]||(n[0]=i=>t(u).info.tableName=i)},null,8,["value"])]),_:1}),e(o,{name:"tableComment",required:"",label:"表描述"},{default:l(()=>[e(_,{value:t(u).info.tableComment,"onUpdate:value":n[1]||(n[1]=i=>t(u).info.tableComment=i)},null,8,["value"])]),_:1}),e(o,{name:"functionAuthor",required:"",label:"作者"},{default:l(()=>[e(_,{value:t(u).info.functionAuthor,"onUpdate:value":n[2]||(n[2]=i=>t(u).info.functionAuthor=i)},null,8,["value"])]),_:1}),e(o,{name:"className",required:"",label:"实体类名称"},{default:l(()=>[e(_,{value:t(u).info.className,"onUpdate:value":n[3]||(n[3]=i=>t(u).info.className=i)},null,8,["value"])]),_:1}),e(o,{name:"remark",required:"",label:"备注"},{default:l(()=>[e(s,{value:t(u).info.remark,"onUpdate:value":n[4]||(n[4]=i=>t(u).info.remark=i)},null,8,["value"])]),_:1})])):O("",!0)}}}),Se={},Le={class:"mt-12"};function Ke(a,d){return p(),x("div",Le)}const je=Z(Se,[["render",Ke]]),Re={key:0,class:"mt-12"},Ae={class:"desc"},Me={class:"desc"},Ve={class:"desc"},Ee={class:"desc"},Ge=v({__name:"GenerateInfo",setup(a){const d=r(),n=async()=>{const{data:_}=await fe();_.data&&(d.value=ve(_.data))};return E(()=>{n()}),(_,o)=>{var T;const s=X,c=_e,i=Y,k=ie,S=V;return(T=t(u))!=null&&T.info?(p(),x("div",Re,[e(i,{label:"生成包路径"},{default:l(()=>[e(s,{value:t(u).info.packageName,"onUpdate:value":o[0]||(o[0]=f=>t(u).info.packageName=f)},null,8,["value"]),m("div",Ae,[e(c),N(" Java 包的路径 ")])]),_:1}),e(i,{label:"模块名"},{default:l(()=>[e(s,{value:t(u).info.moduleName,"onUpdate:value":o[1]||(o[1]=f=>t(u).info.moduleName=f)},null,8,["value"]),m("div",Me,[e(c),N(" 系统生成3层目录,模块名为第一层 ")])]),_:1}),e(i,{label:"业务名"},{default:l(()=>[e(s,{value:t(u).info.businessName,"onUpdate:value":o[2]||(o[2]=f=>t(u).info.businessName=f)},null,8,["value"]),m("div",Ve,[e(c),N(" 业务名为第二层目录 ")])]),_:1}),e(i,{label:"功能名"},{default:l(()=>[e(s,{value:t(u).info.functionName,"onUpdate:value":o[3]||(o[3]=f=>t(u).info.functionName=f)},null,8,["value"])]),_:1}),e(i,{label:"上级菜单"},{default:l(()=>[e(k,{value:t(u).info.parentMenuId,"onUpdate:value":o[4]||(o[4]=f=>t(u).info.parentMenuId=f),"field-names":{value:"menuId",label:"menuName"},"tree-data":t(d)},null,8,["value","tree-data"]),m("div",Ee,[e(c),N(" 挂载的目录 ")])]),_:1}),e(S)])):O("",!0)}}}),ze=Z(Ge,[["__scopeId","data-v-c480dbfb"]]),He={class:"h-100 flex flex-col"},Pe={class:"flex-1 p-8"},Qe=v({__name:"form",setup(a){return(d,n)=>{const _=de,o=ce,s=H,c=me;return p(),y(c,{model:t(u),"wrapper-col":{span:8},"label-col":{span:4}},{default:l(()=>[e(J,{title:"生成信息编辑",visible:t(B),"onUpdate:visible":n[0]||(n[0]=i=>w(B)?B.value=i:null)},{default:l(()=>[m("div",He,[m("div",Pe,[e(o,{"tab-position":"left",class:"h-100"},{default:l(()=>[e(_,{key:"base-info",tab:"基础信息"},{default:l(()=>[e(Oe)]),_:1}),e(_,{key:"generate-info",tab:"生成信息"},{default:l(()=>[e(ze)]),_:1}),e(_,{key:"field-info",tab:"字段信息"},{default:l(()=>[e(je)]),_:1})]),_:1})]),e(s)])]),_:1},8,["visible"])]),_:1},8,["model"])}}}),We={class:"flex justify-between"},Je={class:"flex gc-4 align-center"},Xe={class:"flex"},Ye=v({__name:"head",setup(a){return(d,n)=>{const _=W,o=q,s=P,c=re,i=R,k=V,S=Q,T=M,f=pe,se=te;return p(),y(se,{title:"数据表列表"},{default:l(()=>[m("div",We,[m("div",Je,[e(s,{title:"导入"},{default:l(()=>[e(o,{type:"primary",onClick:n[0]||(n[0]=z=>$.value=!0)},{default:l(()=>[e(_)]),_:1})]),_:1}),e(s,{title:"编辑"},{default:l(()=>[e(o,{type:"link",onClick:n[1]||(n[1]=z=>t(ae)()),disabled:t(b).length!==1},{default:l(()=>[e(c)]),_:1},8,["disabled"])]),_:1}),e(s,{title:"刷新"},{default:l(()=>[e(o,{type:"link",onClick:t(U)},{default:l(()=>[e(i)]),_:1},8,["onClick"])]),_:1}),e(k,{type:"vertical"}),e(S,{"allow-clear":"",onSearch:t(U)},null,8,["onSearch"])])]),m("div",Xe,[e(f,{title:"确定要删除吗",placement:"bottomRight",onConfirm:n[2]||(n[2]=z=>t(oe)()),disabled:t(b).length===0},{default:l(()=>[e(o,{danger:"",type:"link",disabled:t(b).length===0},{default:l(()=>[e(T)]),_:1},8,["disabled"])]),_:1},8,["disabled"]),e(ne,{columns:t(G),"module-name":t(C).moduleName},null,8,["columns","module-name"])])]),_:1})}}}),Ze=v({__name:"table",setup(a){const d=n=>{K.value=n};return E(()=>{U()}),(n,_)=>(p(),x("div",null,[e(Ye),e(ee,{columns:t(G),table:t(C),query:t(j),"selected-keys":t(b),"onUpdate:selectedKeys":_[0]||(_[0]=o=>w(b)?b.value=o:null)},{default:l(({value:o})=>[o.column.dataIndex==="operation"?(p(),y(be,{key:0,onOpenChange:s=>d(o.record),onEdit:s=>t(ae)(o.record.tableId),items:t(Ce)},null,8,["onOpenChange","onEdit","items"])):O("",!0)]),_:1},8,["columns","table","query","selected-keys"])]))}}),et={class:"system-module"},_t=v({__name:"index",setup(a){return(d,n)=>(p(),x("div",et,[e(Ze),e(Qe),e(Fe)]))}});export{_t as default};
