import{_ as U}from"./FormFooter-5NEaOLHv.js";import{a as n,A as z,r as d,d as y,o as f,e as O,w as s,S as A,u as a,i as b,f as _,F as G,g as j,h as S,j as q,k as x,l as M,B as D,m as H,n as J,p as K,q as Q,s as W,t as X,v as Y,c as P,x as Z}from"./index-HxNFWFwR.js";import{_ as ee}from"./SystemTable.vue_vue_type_script_setup_true_lang-1XGIZ7ZX.js";import{_ as te}from"./TableHead-D-Q4jVMf.js";import{F as ne}from"./Field-Vd8OBjEs.js";import{_ as oe}from"./Operation.vue_vue_type_script_setup_true_lang-BzKfCqHW.js";var ae={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M442.3 677.6l199.4-156.7a11.3 11.3 0 000-17.7L442.3 346.4c-7.4-5.8-18.3-.6-18.3 8.8v313.5c0 9.4 10.9 14.7 18.3 8.9z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"play-square",theme:"outlined"};const le=ae;function C(e){for(var o=1;o<arguments.length;o++){var t=arguments[o]!=null?Object(arguments[o]):{},l=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),l.forEach(function(i){se(e,i,t[i])})}return e}function se(e,o,t){return o in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}var I=function(o,t){var l=C({},o,t.attrs);return n(z,C({},l,{icon:le}),null)};I.displayName="PlaySquareOutlined";I.inheritAttrs=!1;const ie=I,m=d(!1),w={createBy:"",createTime:"",remark:"",jobId:0,jobName:"",jobGroup:"",invokeTarget:"",cronExpression:"",misfirePolicy:"",concurrent:"",status:"",nextValidTime:""},r=d({...w}),re=()=>{r.value={...w}},ue={class:"h-100 flex flex-col"},ce=_("div",{class:"flex-1 p-8"}," Lorem ipsum dolor sit amet consectetur, adipisicing elit. Atque excepturi nesciunt cupiditate vero fugit exercitationem eius voluptas a, expedita placeat nobis quas labore libero, provident officiis ratione sint quaerat laboriosam? ",-1),de=y({__name:"form",setup(e){return(o,t)=>{const l=U,i=G;return f(),O(i,{model:a(r)},{default:s(()=>[n(A,{title:"Untitled",visible:a(m),"onUpdate:visible":t[0]||(t[0]=c=>b(m)?m.value=c:null)},{default:s(()=>[_("div",ue,[ce,n(l)])]),_:1},8,["visible"])]),_:1},8,["model"])}}}),F=d([{title:"更新时间",dataIndex:"updateTime"},{title:"备注",dataIndex:"remark"},{title:"任务名称",dataIndex:"jobName"},{title:"任务分组",dataIndex:"jobGroup"},{title:"调用目标",dataIndex:"invokeTarget"},{title:"CRON表达式",dataIndex:"cronExpression"},{title:"错失策略",dataIndex:"misfirePolicy"},{title:"并发",dataIndex:"concurrent"},{title:"状态",dataIndex:"status"},{title:"下次有效时间",dataIndex:"nextValidTime"},{title:"创建时间",dataIndex:"createTime"}]),_e=e=>j.get("monitor/job/list",{params:e}),me=e=>j.delete(`monitor/job/${e.join(",")}`),pe=e=>j.put("monitor/job/run",{data:e}),fe=e=>j.get(`monitor/job/${e}`),v=d({rowKey:"jobId",data:[],loading:!1,moduleName:"job"}),p=d({pageNum:1,pageSize:10,total:0}),u=d([]),be=[{label:"删除",key:"delete",icon:S(q),onClick(){x(k)}},{label:"执行一次",key:"run",icon:S(ie),onClick(){r.value.jobId&&x(pe,{jobGroup:r.value.jobGroup,jobId:r.value.jobId})}}],g=async()=>{v.value.loading=!0;const{data:e}=await _e(p.value);v.value.data=e.rows,p.value.total=e.total,v.value.loading=!1},N=async e=>{const{data:o}=await fe(r.value.jobId);o.data&&(r.value=o.data,m.value=!0)},ve=async()=>{re(),m.value=!0},k=async e=>{let o=e?[e]:u.value;await x(me,o),g()},ge={class:"flex justify-between"},ye={class:"flex gc-4 align-center"},je={class:"flex"},xe=y({__name:"head",setup(e){return(o,t)=>{const l=M,i=D,c=H,T=J,B=K,E=Q,V=W,R=q,h=X,L=te;return f(),O(L,{title:"定时任务列表"},{default:s(()=>[_("div",ge,[_("div",ye,[n(c,{title:"新建"},{default:s(()=>[n(i,{type:"primary",onClick:a(ve)},{default:s(()=>[n(l)]),_:1},8,["onClick"])]),_:1}),n(c,{title:"编辑"},{default:s(()=>[n(i,{type:"link",onClick:t[0]||(t[0]=$=>a(N)()),disabled:a(u).length!==1},{default:s(()=>[n(T)]),_:1},8,["disabled"])]),_:1}),n(c,{title:"刷新"},{default:s(()=>[n(i,{type:"link",onClick:a(g)},{default:s(()=>[n(B)]),_:1},8,["onClick"])]),_:1}),n(E,{type:"vertical"}),n(V,{"allow-clear":"",onSearch:a(g)},null,8,["onSearch"])])]),_("div",je,[n(h,{title:"确定要删除吗",placement:"bottomRight",onConfirm:t[2]||(t[2]=$=>a(k)()),disabled:a(u).length===0},{default:s(()=>[n(h,{title:"确定要删除吗",placement:"bottomRight",onConfirm:t[1]||(t[1]=$=>a(k)())},{default:s(()=>[n(c,{title:"批量删除"},{default:s(()=>[n(i,{danger:"",type:"link",disabled:a(u).length===0},{default:s(()=>[n(R)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["disabled"]),n(ne,{columns:a(F),"module-name":"test"},null,8,["columns"])])]),_:1})}}}),ke=y({__name:"table",setup(e){return Y(()=>{g()}),(o,t)=>(f(),P("div",null,[n(xe),n(ee,{columns:a(F),table:a(v),query:a(p),"onUpdate:query":t[0]||(t[0]=l=>b(p)?p.value=l:null),"selected-keys":a(u),"onUpdate:selectedKeys":t[1]||(t[1]=l=>b(u)?u.value=l:null),form:a(r),"onUpdate:form":t[2]||(t[2]=l=>b(r)?r.value=l:null)},{default:s(({value:l})=>[l.column.dataIndex==="operation"?(f(),O(oe,{key:0,onEdit:a(N),items:a(be)},null,8,["onEdit","items"])):Z("",!0)]),_:1},8,["columns","table","query","selected-keys","form"])]))}}),Oe={class:"system-module"},Pe=y({__name:"index",setup(e){return(o,t)=>(f(),P("div",Oe,[n(ke),n(de)]))}});export{Pe as default};
