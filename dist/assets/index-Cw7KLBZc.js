import{g as k,r,d as C,o as g,e as $,w as o,a as e,S as E,u as n,i as K,f as _,K as M,k as B,ag as Y,ah as L,L as z,ai as D,aj as P,ak as H,B as q,F as Q,h as A,j as F,l as G,m as J,n as W,p as X,q as Z,s as ee,R as ne,t as te,v as oe,c as S,x as ae,al as le}from"./index-HxNFWFwR.js";import{_ as se}from"./SystemTable.vue_vue_type_script_setup_true_lang-1XGIZ7ZX.js";import{_ as ie}from"./TableHead-D-Q4jVMf.js";import{F as ce}from"./Field-Vd8OBjEs.js";import{_ as ue}from"./Operation.vue_vue_type_script_setup_true_lang-BzKfCqHW.js";const _e=a=>k.get("system/config/list",{params:a}),de=a=>k.get(`system/config/${a}`),pe=a=>k.put("system/config",a),re=a=>k.post("system/config",a),me=a=>k.post(`system/config/${a.join(",")}`),fe="/assets/form-DMCste1i.png",m=r(!1),R={createBy:"",createTime:"",updateBy:"",remark:"",configId:0,configName:"",configKey:"",configValue:"",configType:"Y"},s=r({...R}),ge=()=>{s.value={...R}},O=[{label:"是",value:"Y"},{label:"否",value:"N"}],ve={class:"h-100 flex flex-col"},ye={class:"text-center"},xe=["src"],ke={class:"flex-1 p-8"},we={class:"text-center"},be=C({__name:"form",setup(a){const c=r(!1),l=async()=>{c.value=!0,s.value.configId?await B(pe,s.value):await B(re,s.value),c.value=!1,m.value=!1};return(w,t)=>{const u=Y,I=L,v=z,d=D,N=P,T=H,U=q,V=Q;return g(),$(V,{model:n(s),"wrapper-col":{span:12,offset:1},"label-col":{span:4},onSubmit:l},{default:o(()=>[e(E,{w:"60%",title:"参数配置",visible:n(m),"onUpdate:visible":t[5]||(t[5]=i=>K(m)?m.value=i:null)},{default:o(()=>[_("div",ve,[e(I,null,{default:o(()=>[e(u,{span:8,offset:4},{default:o(()=>[_("div",ye,[_("img",{src:n(fe),width:"128",alt:""},null,8,xe)])]),_:1})]),_:1}),_("div",ke,[_("div",null,[e(d,{label:"参数名称",required:"",name:"configName"},{default:o(()=>[e(v,{value:n(s).configName,"onUpdate:value":t[0]||(t[0]=i=>n(s).configName=i),placeholder:"请输入配置名"},null,8,["value"])]),_:1}),e(d,{label:"参数键名",required:"",name:"configKey"},{default:o(()=>[e(v,{value:n(s).configKey,"onUpdate:value":t[1]||(t[1]=i=>n(s).configKey=i),placeholder:"请输入键"},null,8,["value"])]),_:1}),e(d,{label:"参数键值",required:"",name:"configValue"},{default:o(()=>[e(v,{value:n(s).configValue,"onUpdate:value":t[2]||(t[2]=i=>n(s).configValue=i),placeholder:"请输入键值"},null,8,["value"])]),_:1}),e(d,{label:"是否内置",required:"",name:"configValue"},{default:o(()=>[e(N,{value:n(s).configType,"onUpdate:value":t[3]||(t[3]=i=>n(s).configType=i),options:n(O)},null,8,["value","options"])]),_:1}),e(d,{label:"参数备注"},{default:o(()=>[e(T,{autoSize:{minRows:2,maxRows:6},value:n(s).remark,"onUpdate:value":t[4]||(t[4]=i=>n(s).remark=i),placeholder:"请输入备注"},null,8,["value"])]),_:1}),e(u,{span:12,offset:5},{default:o(()=>[_("div",we,[e(U,{type:"primary",loading:n(c),"html-type":"submit",block:""},{default:o(()=>[M("提交")]),_:1},8,["loading"])])]),_:1})])])])]),_:1},8,["visible"])]),_:1},8,["model"])}}}),b=r([{title:"配置名称",dataIndex:"configName",width:120,show:!0},{title:"备注",dataIndex:"remark",show:!0},{title:"配置键",dataIndex:"configKey",show:!0},{title:"配置值",dataIndex:"configValue",show:!0},{title:"配置类型",dataIndex:"configType",show:!0},{title:"创建时间",dataIndex:"createTime",show:!0},{title:"更新时间",dataIndex:"updateTime",show:!0}]),y=r({rowKey:"configId",data:[],loading:!1,moduleName:"config"}),f=r({pageNum:1,pageSize:10,total:0,configName:"",configType:"Y"}),x=r([]),he=[{label:"删除",key:"delete",icon:A(F)}],h=async()=>{y.value.loading=!0;const{data:a}=await _e(f.value);y.value.data=a.rows,y.value.loading=!1},j=async a=>{let c=a||x.value[0];const{data:l}=await de(c);l.data&&(s.value=l.data,m.value=!0)},$e=async a=>{const c=a?[a]:x.value;B(me,c)},Ce=async()=>{ge(),m.value=!0},Ie={class:"flex justify-between"},Ne={class:"flex gc-4 align-center"},Te=_("div",{class:"text-999 text-nowrap"},"是否禁用",-1),Ue={class:"flex align-center"},Ve=C({__name:"head",setup(a){return(c,l)=>{const w=G,t=q,u=J,I=W,v=X,d=Z,N=ee,T=ne,U=F,V=te,i=ie;return g(),$(i,{title:"参数设置"},{default:o(()=>[_("div",Ie,[_("div",Ne,[e(u,{title:"新建",onClick:n(Ce)},{default:o(()=>[e(t,{type:"primary"},{default:o(()=>[e(w)]),_:1})]),_:1},8,["onClick"]),e(u,{title:"编辑"},{default:o(()=>[e(t,{type:"link",onClick:l[0]||(l[0]=p=>n(j)())},{default:o(()=>[e(I)]),_:1})]),_:1}),e(u,{title:"刷新",onClick:n(h)},{default:o(()=>[e(t,{type:"link"},{default:o(()=>[e(v)]),_:1})]),_:1},8,["onClick"]),e(d,{type:"vertical"}),e(N,{placeholder:"请输入参数名","allow-clear":"",value:n(f).configName,"onUpdate:value":l[1]||(l[1]=p=>n(f).configName=p),onSearch:n(h)},null,8,["value","onSearch"]),e(d,{type:"vertical"}),Te,e(T,{value:n(f).configType,"onUpdate:value":l[2]||(l[2]=p=>n(f).configType=p),options:n(O),onChange:n(h)},null,8,["value","options","onChange"])])]),_("div",Ue,[e(V,{title:"确定要删除吗",placement:"bottomRight",onConfirm:l[3]||(l[3]=p=>n($e)())},{default:o(()=>[e(u,{title:"批量删除"},{default:o(()=>[e(t,{danger:"",type:"link"},{default:o(()=>[e(U)]),_:1})]),_:1})]),_:1}),e(ce,{columns:n(b),"onUpdate:columns":l[4]||(l[4]=p=>K(b)?b.value=p:null),"module-name":n(y).moduleName},null,8,["columns","module-name"])])]),_:1})}}}),Be=C({__name:"table",setup(a){return oe(()=>{h()}),(c,l)=>{const w=le;return g(),S("div",null,[e(Ve),e(se,{columns:n(b),table:n(y),query:n(f),"selected-keys":n(x),"onUpdate:selectedKeys":l[0]||(l[0]=t=>K(x)?x.value=t:null)},{default:o(({value:t})=>[t.column.dataIndex==="operation"?(g(),$(ue,{key:0,onEdit:u=>n(j)(t.record.configId),items:n(he)},null,8,["onEdit","items"])):t.column.dataIndex==="configType"?(g(),$(w,{key:1,disabled:"",checked:t.record.configType,"onUpdate:checked":u=>t.record.configType=u,"un-checked-value":"N","checked-value":"Y"},null,8,["checked","onUpdate:checked"])):ae("",!0)]),_:1},8,["columns","table","query","selected-keys"])])}}}),Ke={class:"system-module"},je=C({__name:"index",setup(a){return(c,l)=>(g(),S("div",Ke,[e(Be),e(be)]))}});export{je as default};
