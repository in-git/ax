import{a as D,r as h,q as J,s as X,v as q,g as N,o as p,i as y,w as a,b as t,f as w,t as A,u as e,Y as Z,d as P,C as I,x as ee,y as te,l as ae,j as F,I as E,H as oe,ae as M,an as ne,B as H,L as le,ao as se,ap as R,c as $,N as ue,O as re,P as pe,Q as ie,U as de,a6 as ce,ak as _e,aq as me,F as j,k as K,ag as fe,V as Q,ar as ve,D as ge,m as ye,_ as be,a0 as we,a2 as Ce,h as ke}from"./index-BjjElDwd.js";import{g as he}from"./dict.data-BhjuA9yr.js";import{F as xe}from"./Field-2cx32dsF.js";import{O as $e,A as Se}from"./OrderedListOutlined-DntzBFSL.js";import{_ as Ne}from"./Operation.vue_vue_type_script_setup_true_lang-BQYuwBUW.js";import"./FilterOutlined-CerPZg4l.js";const Ie=o=>D.get("system/post/list",{params:o}),Be=o=>D.get(`system/post/${o}`),De=o=>D.post("system/post",o),Oe=o=>D.put("/system/post",o),Fe=o=>D.delete(`system/post/${o.join(",")}`),S=h(!1),W={postId:0,postCode:"",postName:"",postSort:0,status:"",createBy:"",createTime:null,updateBy:"",updateTime:null,remark:""},c=h({...W}),Ue=()=>{c.value={...W}},ze={postCode:[{required:!0,trigger:"change"}],postName:[{required:!0,trigger:"change"}],postSort:[{required:!0,trigger:"change"}],status:[{required:!0,trigger:"change"}],remark:[{required:!1,trigger:"change"}]},k=h({rowKey:"postId",data:[],loading:!1,moduleName:"post"}),O=h("table"),_=h({pageNum:1,pageSize:10,total:0,postCode:"",postName:"",postSort:0,status:""}),m=h([]),Re=[{label:"删除",key:"delete",icon:J(X),async onClick(){await Y(),g()}}],g=async()=>{k.value.loading=!0;const{data:o}=await Ie(_.value);k.value.data=o.rows,_.value.total=o.total,k.value.loading=!1},U=async o=>{let s=o||m.value[0];k.value.loading=!0;const{data:l}=await Be(s);l.data&&(c.value=l.data,S.value=!0),k.value.loading=!1},qe=async()=>{Ue(),S.value=!0},Y=async o=>{let s=o?[o]:m.value;await q(Fe,s),await g(),m.value=[]},Ae=w("span",null,"已选:",-1),Pe=N({__name:"AXFooter",setup(o){const s=(l,d)=>{_.value.pageNum=l,_.value.pageSize=d,g()};return(l,d)=>{const n=Z,i=P,r=I;return p(),y(r,{bordered:!1,bodyStyle:{padding:"4px 12px"},class:"card__footer"},{default:a(()=>[t(i,{justify:"space-between",align:"center"},{default:a(()=>[w("div",null,[Ae,w("span",null,"（"+A(e(m).length)+"）",1)]),t(n,{total:e(_).total,current:e(_).pageNum,"page-size":e(_).pageSize,"show-size-changer":"",onChange:s,"show-quick-jumper":"","show-less-items":""},null,8,["total","current","page-size"])]),_:1})]),_:1})}}}),T=h(),Te=async()=>{const{data:o}=await he("sys_common_status");o.data&&(T.value=ee(o.data))},Ve=N({__name:"AXForm",setup(o){const s=h(!1),l=async()=>{s.value=!0,c.value.postId?await q(Oe,c.value):await q(De,c.value),await g(),s.value=!1,S.value=!1};return(d,n)=>{const i=E,r=oe,C=M,u=ne,x=H,f=I,B=le;return p(),y(B,{rules:e(ze),model:e(c),onFinish:l,"wrapper-col":{span:8,offset:1},"label-col":{span:4,offset:4}},{default:a(()=>[t(te,{title:"岗位信息",visible:e(S),"onUpdate:visible":n[5]||(n[5]=v=>ae(S)?S.value=v:null)},{default:a(()=>[t(f,{title:"编辑/新增"},{extra:a(()=>[t(x,{htmlType:"submit",type:"primary",loading:e(s),block:""},{default:a(()=>[F("保存")]),_:1},8,["loading"])]),default:a(()=>[t(r,{label:"岗位编码",name:"postCode"},{default:a(()=>[t(i,{placeholder:"请输入岗位编码",value:e(c).postCode,"onUpdate:value":n[0]||(n[0]=v=>e(c).postCode=v)},null,8,["value"])]),_:1}),t(r,{label:"岗位名称",name:"postName"},{default:a(()=>[t(i,{placeholder:"请输入岗位名称",value:e(c).postName,"onUpdate:value":n[1]||(n[1]=v=>e(c).postName=v)},null,8,["value"])]),_:1}),t(r,{label:"显示顺序",name:"postSort"},{default:a(()=>[t(i,{placeholder:"请输入显示顺序",value:e(c).postSort,"onUpdate:value":n[2]||(n[2]=v=>e(c).postSort=v)},null,8,["value"])]),_:1}),t(r,{label:"状态",name:"status"},{default:a(()=>[t(C,{value:e(c).status,"onUpdate:value":n[3]||(n[3]=v=>e(c).status=v),class:"w-100",placeholder:"请选择状态","allow-clear":"",onChange:e(g),options:e(T)},null,8,["value","onChange","options"])]),_:1}),t(r,{label:"备注",name:"remark"},{default:a(()=>[t(u,{placeholder:"请输入备注",value:e(c).remark,"onUpdate:value":n[4]||(n[4]=v=>e(c).remark=v)},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["visible"])]),_:1},8,["rules","model"])}}}),V=h([{title:"岗位编码",dataIndex:"postCode"},{title:"岗位名称",dataIndex:"postName"},{title:"显示顺序",dataIndex:"postSort"},{title:"状态",dataIndex:"status"},{title:"备注",dataIndex:"remark"}]),je=w("h3",{class:"text-14"},"岗位管理列表",-1),Ke=N({__name:"AXHead",setup(o){return(s,l)=>{const d=E,n=M,i=H,r=P,C=ue,u=re,x=pe,f=ie,B=X,v=de,G=I,z=se("perm");return p(),y(G,{class:"table__head"},{title:a(()=>[je]),default:a(()=>[t(r,{class:"mb-12",gap:12,wrap:"wrap"},{default:a(()=>[w("div",null,[t(d,{onBlur:e(g),value:e(_).postCode,"onUpdate:value":l[0]||(l[0]=b=>e(_).postCode=b),style:{width:"160px"},placeholder:"请输入岗位编码","allow-clear":""},null,8,["onBlur","value"])]),w("div",null,[t(d,{onBlur:e(g),value:e(_).postName,"onUpdate:value":l[1]||(l[1]=b=>e(_).postName=b),style:{width:"160px"},placeholder:"请输入岗位名称","allow-clear":""},null,8,["onBlur","value"])]),w("div",null,[t(d,{onBlur:e(g),value:e(_).postSort,"onUpdate:value":l[2]||(l[2]=b=>e(_).postSort=b),style:{width:"160px"},placeholder:"请输入显示顺序","allow-clear":""},null,8,["onBlur","value"])]),w("div",null,[t(n,{value:e(_).status,"onUpdate:value":l[3]||(l[3]=b=>e(_).status=b),style:{width:"160px"},placeholder:"请选择状态","allow-clear":"",onBlur:e(g),options:e(T)},null,8,["value","onBlur","options"])]),t(i,{type:"primary",onClick:e(g)},{default:a(()=>[F("搜索")]),_:1},8,["onClick"])]),_:1}),t(r,{justify:"space-between",align:"center"},{default:a(()=>[t(r,{justify:"space-between",align:"center"},{default:a(()=>[t(r,{align:"center",gap:4},{default:a(()=>[R((p(),$("div",null,[t(u,{title:"新建"},{default:a(()=>[t(i,{type:"primary",onClick:e(qe)},{default:a(()=>[t(C)]),_:1},8,["onClick"])]),_:1})])),[[z,"system:post:add"]]),R((p(),$("div",null,[t(u,{title:"编辑"},{default:a(()=>[t(i,{type:"link",onClick:l[4]||(l[4]=b=>e(U)()),disabled:e(m).length!==1},{default:a(()=>[t(x)]),_:1},8,["disabled"])]),_:1})])),[[z,"system:post:edit"]]),t(u,{title:"刷新"},{default:a(()=>[t(i,{type:"link",onClick:e(g)},{default:a(()=>[t(f)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),t(r,null,{default:a(()=>[R((p(),$("div",null,[t(v,{title:"确定要删除吗",disabled:e(m).length===0,placement:"bottomRight",onConfirm:l[5]||(l[5]=b=>e(Y)())},{default:a(()=>[t(u,{title:"批量删除"},{default:a(()=>[t(i,{danger:"",type:"link",disabled:e(m).length===0},{default:a(()=>[t(B)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["disabled"])])),[[z,"system:post:remove"]]),t(xe,{columns:e(V),"module-name":e(k).moduleName},null,8,["columns","module-name"]),w("div",null,[e(O)==="table"?(p(),y(u,{key:0,title:"卡片模式",onClick:l[6]||(l[6]=b=>O.value="card")},{default:a(()=>[t(i,{type:"link"},{default:a(()=>[t(e($e))]),_:1})]),_:1})):(p(),y(u,{key:1,title:"表格模式",onClick:l[7]||(l[7]=b=>O.value="table")},{default:a(()=>[t(i,{type:"link"},{default:a(()=>[t(e(Se))]),_:1})]),_:1}))])]),_:1})]),_:1})]),_:1})}}}),Le=o=>{console.log("dragstart==",o.id)},Xe=o=>{console.log("drop==",o.id)},Ee=o=>{m.value.includes(o.id)?m.value=m.value.filter(s=>s!==o.id):m.value.push(o.id)},L=ce(()=>{let o=[];return k.value.data.map((s,l)=>{let d=[];V.value.forEach((n,i)=>{const r=n.title,C=s[n.dataIndex];n.dataIndex!=="operation"&&d.push({label:r,value:C})}),o.push({id:s.postId,items:d,raw:s})}),o}),Me=["onClick","onDblclick","onDragstart","onDrop"],He={key:0,class:"active"},Qe=N({__name:"AXCard",setup(o){const s=h();return _e(()=>{me(s,L.value,{animation:200,onUpdate(l){}})}),(l,d)=>{const n=ve,i=ge,r=ye,C=I;return p(),y(C,{class:"table__card",bordered:!1,"body-style":{padding:"0"}},{default:a(()=>[w("ul",{class:"table_card_list flex-1",ref_key:"cardRef",ref:s},[(p(!0),$(j,null,K(e(L),(u,x)=>(p(),$("li",{key:x,size:"small",onClick:f=>e(Ee)(u),class:fe({active:e(m).includes(u.id)}),onDblclick:f=>e(U)(u.id),draggable:!0,onDragstart:f=>e(Le)(u),onDrop:f=>e(Xe)(u),onDragover:d[0]||(d[0]=f=>f.preventDefault())},[t(C,null,{default:a(()=>[e(m).includes(u.id)?(p(),$("div",He,A(x+1),1)):Q("",!0),t(n,{title:u.items[0].value,class:"mb-8"},{description:a(()=>[F("详细信息")]),_:2},1032,["title"]),t(r,{column:1,layout:"horizontal",labelStyle:{width:"80px",color:"#666"}},{default:a(()=>[(p(!0),$(j,null,K(u.items,(f,B)=>(p(),y(i,{label:f.label,contentStyle:{fontWeight:B===0?"bold":""}},{default:a(()=>[F(A(f.value),1)]),_:2},1032,["label","contentStyle"]))),256))]),_:2},1024)]),_:2},1024)],42,Me))),128))],512)]),_:1})}}}),We=be(Qe,[["__scopeId","data-v-6a0d1eae"]]),Ye=N({__name:"AXTable",setup(o){const s=n=>{c.value=n},l=n=>({onClick(){m.value=[n.postId]},onDblclick(){U(n.postId)}}),d=(n,i,r)=>{_.value.pageNum=n.current,_.value.pageSize=n.pageSize};return(n,i)=>{const r=Ce,C=I;return p(),y(C,{style:{boxShadow:"none"}},{default:a(()=>[t(r,{onChange:d,"table-layout":"fixed",sticky:"","row-selection":{selectedRowKeys:e(m),onChange:u=>m.value=u},pagination:!1,customRow:l,rowKey:e(k).rowKey,columns:e(we)(e(V)),"data-source":e(k).data},{bodyCell:a(({column:u,record:x})=>[u.key==="operation"?(p(),y(Ne,{key:0,loading:e(k).loading,onOpenChange:f=>s(x),onOnClick:f=>e(U)(x.postId),items:e(Re)},null,8,["loading","onOpenChange","onOnClick","items"])):Q("",!0)]),_:1},8,["row-selection","rowKey","columns","data-source"])]),_:1})}}}),Ge={class:"data__content"},nt=N({__name:"index",setup(o){return ke(async()=>{await g(),await Te()}),(s,l)=>{const d=P,n=I;return p(),y(n,{class:"system__template","body-style":{height:"100%",overflow:"hidden",paddingBottom:"0"}},{default:a(()=>[t(d,{vertical:"",class:"h-100"},{default:a(()=>[t(Ke),w("div",Ge,[e(O)==="table"?(p(),y(Ye,{key:0})):(p(),y(We,{key:1}))]),t(Pe),t(Ve)]),_:1})]),_:1})}}});export{nt as default};
