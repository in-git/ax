import{r as C,q as Z,s as L,aS as G,aT as J,v as j,aU as ee,g as B,o as i,i as g,w as n,b as t,f as b,t as N,u as e,Z as te,d as R,C as O,y as ne,l as q,j as $,c as h,F,k as z,E as ae,aV as le,aW as oe,aX as se,B as K,I as M,aY as ie,K as ue,N as re,ah as Q,ai as S,a4 as ce,O as de,P as _e,Q as pe,R as me,V as fe,aj as ge,a9 as ve,ak as ye,a6 as be,al as ke,D as we,m as he,_ as xe,W as Ce,h as Te}from"./index-BwH1N0EP.js";import{F as Ie}from"./Field-t01NagIT.js";import{O as $e,A as Be}from"./OrderedListOutlined-mxvcXjpl.js";import{_ as De}from"./Operation.vue_vue_type_script_setup_true_lang-DN1Tn9Jl.js";import{_ as Ne}from"./SystemTable.vue_vue_type_script_setup_true_lang-BlvBMr8u.js";const I=C(!1),W={noticeId:0,noticeTitle:"",noticeContent:"",status:"",createBy:"",updateBy:"",updateTime:null,remark:"",createTime:"",noticeType:"1"},c=C({...W}),Oe=()=>{c.value={...W}},qe={noticeId:[{required:!1,trigger:"change"}],noticeTitle:[{required:!0,trigger:"change"}],noticeType:[{required:!0,trigger:"change"}],noticeContent:[{required:!1,trigger:"change"}],status:[{required:!1,trigger:"change"}],createBy:[{required:!1,trigger:"change"}],createTime:[{required:!1,trigger:"change"}],updateBy:[{required:!1,trigger:"change"}],updateTime:[{required:!1,trigger:"change"}],remark:[{required:!1,trigger:"change"}]},x=C({rowKey:"noticeId",data:[],loading:!1,moduleName:"notice"}),U=C("table"),m=C({pageNum:1,pageSize:10,total:0,noticeTitle:"",noticeType:""}),f=C([]),Se=[{label:"删除",key:"delete",icon:Z(L),async onClick(){await P(),k()}}],k=async()=>{x.value.loading=!0;const{data:o}=await G(m.value);x.value.data=o.rows,m.value.total=o.total,x.value.loading=!1},A=async o=>{let u=o||f.value[0];x.value.loading=!0;const{data:l}=await J(u);l.data&&(c.value=l.data,I.value=!0),x.value.loading=!1},Ue=async()=>{Oe(),I.value=!0},P=async o=>{let u=o?[o]:f.value;await j(ee,u),await k(),f.value=[]},Fe=b("span",null,"已选:",-1),ze=B({__name:"AXFooter",setup(o){const u=(l,r)=>{m.value.pageNum=l,m.value.pageSize=r,k()};return(l,r)=>{const a=te,_=R,s=O;return i(),g(s,{bordered:!1,class:"card__footer"},{default:n(()=>[t(_,{justify:"space-between",align:"center"},{default:n(()=>[b("div",null,[Fe,b("span",null,"（"+N(e(f).length)+"）",1)]),t(a,{total:e(m).total,current:e(m).pageNum,"page-size":e(m).pageSize,"show-size-changer":"",onChange:u,"show-quick-jumper":"","show-less-items":""},null,8,["total","current","page-size"])]),_:1})]),_:1})}}}),H=[{label:"通知",value:"1"},{label:"公告",value:"2"}],Ae={class:"flex-1"},Re=B({__name:"AXForm",setup(o){const u=C(!1),l=async()=>{u.value=!0,c.value.noticeId?await j(oe,c.value):await j(se,c.value),await k(),u.value=!1,I.value=!1};return(r,a)=>{const _=K,s=M,y=ie,p=ue,T=R,v=O,D=re;return i(),g(D,{rules:e(qe),model:e(c),onFinish:l,"wrapper-col":{span:8,offset:1},"label-col":{span:4,offset:4}},{default:n(()=>[t(ne,{title:"通知公告",visible:e(I),"onUpdate:visible":a[4]||(a[4]=d=>q(I)?I.value=d:null)},{default:n(()=>[t(v,{title:"编辑/新增"},{extra:n(()=>[t(_,{type:"primary",htmlType:"submit"},{default:n(()=>[$("保存")]),_:1})]),default:n(()=>[t(T,{justify:"space-between",wrap:"wrap",class:"mb-8"},{default:n(()=>[t(T,{gap:12,wrap:"wrap"},{default:n(()=>[t(s,{placeholder:"请输入标题",value:e(c).noticeTitle,"onUpdate:value":a[0]||(a[0]=d=>e(c).noticeTitle=d),style:{width:"200px"}},null,8,["value"]),t(p,{value:e(c).status,"onUpdate:value":a[1]||(a[1]=d=>e(c).status=d)},{default:n(()=>[(i(!0),h(F,null,z(e(ae),d=>(i(),g(y,{value:d.value},{default:n(()=>[$(N(d.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"]),t(p,{value:e(c).noticeType,"onUpdate:value":a[2]||(a[2]=d=>e(c).noticeType=d)},{default:n(()=>[(i(!0),h(F,null,z(e(H),d=>(i(),g(y,{value:d.value},{default:n(()=>[$(N(d.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"])]),_:1})]),_:1}),b("div",Ae,[t(e(le),{contentType:"html",theme:"snow",content:e(c).noticeContent,"onUpdate:content":a[3]||(a[3]=d=>e(c).noticeContent=d),style:{height:"390px"}},null,8,["content"])])]),_:1})]),_:1},8,["visible"])]),_:1},8,["rules","model"])}}}),E=C([{title:"公告ID",dataIndex:"noticeId"},{title:"公告标题",dataIndex:"noticeTitle"},{title:"公告类型（1通知 2公告）",dataIndex:"noticeType"},{title:"公告内容",dataIndex:"noticeContent"},{title:"公告状态（0正常 1关闭）",dataIndex:"status"},{title:"创建者",dataIndex:"createBy"},{title:"创建时间",dataIndex:"createTime"},{title:"更新者",dataIndex:"updateBy"},{title:"更新时间",dataIndex:"updateTime"},{title:"备注",dataIndex:"remark"}]),Ve=b("h3",{class:"text-14"},"公告列表",-1),je=B({__name:"AXHead",setup(o){return(u,l)=>{const r=M,a=ce,_=K,s=R,y=de,p=_e,T=pe,v=me,D=L,d=fe,Y=O,V=Q("perm");return i(),g(Y,{class:"table__head"},{title:n(()=>[Ve]),default:n(()=>[t(s,{class:"mb-12",gap:12,wrap:"wrap"},{default:n(()=>[b("div",null,[t(r,{onBlur:e(k),value:e(m).noticeTitle,"onUpdate:value":l[0]||(l[0]=w=>e(m).noticeTitle=w),style:{width:"160px"},placeholder:"请输入公告标题","allow-clear":""},null,8,["onBlur","value"])]),b("div",null,[t(a,{value:e(m).noticeType,"onUpdate:value":l[1]||(l[1]=w=>e(m).noticeType=w),style:{width:"160px"},placeholder:"请选择公告类型","allow-clear":"",onBlur:e(k),options:e(H)},null,8,["value","onBlur","options"])]),b("div",null,[t(r,{onBlur:e(k),value:e(m).status,"onUpdate:value":l[2]||(l[2]=w=>e(m).status=w),style:{width:"160px"},placeholder:"请输入公告状态","allow-clear":""},null,8,["onBlur","value"])]),t(_,{type:"primary",onClick:e(k)},{default:n(()=>[$("搜索")]),_:1},8,["onClick"])]),_:1}),t(s,{justify:"space-between",align:"center"},{default:n(()=>[t(s,{justify:"space-between",align:"center"},{default:n(()=>[t(s,{align:"center",gap:4},{default:n(()=>[S((i(),h("div",null,[t(p,{title:"新建"},{default:n(()=>[t(_,{type:"primary",onClick:e(Ue)},{default:n(()=>[t(y)]),_:1},8,["onClick"])]),_:1})])),[[V,"system:notice:add"]]),S((i(),h("div",null,[t(p,{title:"编辑"},{default:n(()=>[t(_,{type:"link",onClick:l[3]||(l[3]=w=>e(A)()),disabled:e(f).length!==1},{default:n(()=>[t(T)]),_:1},8,["disabled"])]),_:1})])),[[V,"system:notice:edit"]]),t(p,{title:"刷新"},{default:n(()=>[t(_,{type:"link",onClick:e(k)},{default:n(()=>[t(v)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),t(s,null,{default:n(()=>[S((i(),h("div",null,[t(d,{title:"确定要删除吗",disabled:e(f).length===0,placement:"bottomRight",onConfirm:l[4]||(l[4]=w=>e(P)())},{default:n(()=>[t(p,{title:"批量删除"},{default:n(()=>[t(_,{danger:"",type:"link",disabled:e(f).length===0},{default:n(()=>[t(D)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["disabled"])])),[[V,"system:notice:remove"]]),t(Ie,{columns:e(E),"module-name":e(x).moduleName},null,8,["columns","module-name"]),e(U)==="table"?(i(),g(p,{key:0,title:"卡片模式",onClick:l[5]||(l[5]=w=>U.value="card")},{default:n(()=>[t(_,{type:"link"},{default:n(()=>[t(e($e))]),_:1})]),_:1})):(i(),g(p,{key:1,title:"表格模式",onClick:l[6]||(l[6]=w=>U.value="table")},{default:n(()=>[t(_,{type:"link"},{default:n(()=>[t(e(Be))]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1})}}}),Ee=o=>{console.log("dragstart==",o.id)},Xe=o=>{console.log("drop==",o.id)},Le=o=>{f.value.includes(o.id)?f.value=f.value.filter(u=>u!==o.id):f.value.push(o.id)},X=ge(()=>{let o=[];return x.value.data.map((u,l)=>{let r=[];E.value.forEach((a,_)=>{const s=a.title,y=u[a.dataIndex];a.dataIndex!=="operation"&&r.push({label:s,value:y})}),o.push({id:u.websiteId,items:r,raw:u})}),o}),Ke=["onClick","onDblclick","onDragstart","onDrop"],Me={class:"index"},Qe=B({__name:"AXCard",setup(o){const u=C();return ve(()=>{ye(u,X.value,{animation:200,onUpdate(l){}})}),(l,r)=>{const a=ke,_=we,s=he,y=O;return i(),g(y,{bordered:!1,"body-style":{padding:"0"}},{default:n(()=>[b("ul",{class:"table_card_list flex-1",ref_key:"cardRef",ref:u},[(i(!0),h(F,null,z(e(X),(p,T)=>(i(),h("li",{key:T,size:"small",onClick:v=>e(Le)(p),class:be({active:e(f).includes(p.id)}),onDblclick:v=>e(A)(p.id),draggable:!0,onDragstart:v=>e(Ee)(p),onDrop:v=>e(Xe)(p),onDragover:r[0]||(r[0]=v=>v.preventDefault())},[t(y,null,{default:n(()=>[b("div",Me,N(T+1),1),t(a,{title:"Europe Street beat",class:"mb-8"},{description:n(()=>[$("详细信息")]),_:1}),t(s,{column:1,layout:"horizontal",labelStyle:{width:"80px",color:"#666"}},{default:n(()=>[(i(!0),h(F,null,z(p.items,(v,D)=>(i(),g(_,{label:v.label,contentStyle:{fontWeight:D===0?"bold":""}},{default:n(()=>[$(N(v.value),1)]),_:2},1032,["label","contentStyle"]))),256))]),_:2},1024)]),_:2},1024)],42,Ke))),128))],512)]),_:1})}}}),We=xe(Qe,[["__scopeId","data-v-97fdcfdd"]]),Pe={key:0},He=B({__name:"AXTable",setup(o){const u=r=>{c.value=r},l=r=>{A(r)};return(r,a)=>{const _=Q("perm");return i(),g(Ne,{columns:e(E),table:e(x),query:e(m),"onUpdate:query":a[0]||(a[0]=s=>q(m)?m.value=s:null),"selected-keys":e(f),"onUpdate:selectedKeys":a[1]||(a[1]=s=>q(f)?f.value=s:null),form:e(c),"onUpdate:form":a[2]||(a[2]=s=>q(c)?c.value=s:null),onDblclick:l},{default:n(({value:s})=>[s.column.dataIndex==="operation"?S((i(),h("div",Pe,[t(De,{loading:e(x).loading,onOpenChange:y=>u(s.record),onOnClick:y=>e(A)(s.record.noticeId),items:e(Se)},null,8,["loading","onOpenChange","onOnClick","items"])])),[[_,"sys-notice-edit"]]):Ce("",!0)]),_:1},8,["columns","table","query","selected-keys","form"])}}}),Ye={class:"data__content"},nt=B({__name:"index",setup(o){return Te(()=>{k()}),(u,l)=>{const r=R,a=O;return i(),g(a,{class:"system__template","body-style":{height:"100%",overflow:"hidden",paddingBottom:"0"}},{default:n(()=>[t(r,{vertical:"",class:"h-100"},{default:n(()=>[t(je),b("div",Ye,[e(U)==="table"?(i(),g(He,{key:0})):(i(),g(We,{key:1}))]),t(ze),t(Re)]),_:1})]),_:1})}}});export{nt as default};
