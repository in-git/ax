import{r as C,q as Y,s as X,c1 as G,c2 as Z,v as j,c3 as ee,g as B,o as i,i as g,w as n,b as t,f as b,t as q,u as e,Y as te,d as R,C as N,y as ne,l as O,j as $,c as x,F,k as z,A as ae,c4 as le,c5 as oe,c6 as se,B as K,I as M,c7 as ie,J as ue,L as ce,ao as Q,ap as U,ae as re,N as de,O as _e,P as pe,Q as me,U as fe,a6 as ge,ak as ve,aq as ye,ag as be,ar as ke,D as we,m as xe,_ as he,V as Ce,h as Te}from"./index-BKuZjElQ.js";import{F as Ie}from"./Field-CAXwbqSR.js";import{O as $e,A as Be}from"./OrderedListOutlined-D5k1_OGP.js";import{_ as De}from"./Operation.vue_vue_type_script_setup_true_lang-0TYptOtC.js";import{_ as qe}from"./SystemTable.vue_vue_type_script_setup_true_lang-q25kBky5.js";import"./FilterOutlined-DwkC-MSK.js";const I=C(!1),P={noticeId:0,noticeTitle:"",noticeContent:"",status:"",createBy:"",updateBy:"",updateTime:null,remark:"",createTime:"",noticeType:"1"},r=C({...P}),Ne=()=>{r.value={...P}},Oe={noticeId:[{required:!1,trigger:"change"}],noticeTitle:[{required:!0,trigger:"change"}],noticeType:[{required:!0,trigger:"change"}],noticeContent:[{required:!1,trigger:"change"}],status:[{required:!1,trigger:"change"}],createBy:[{required:!1,trigger:"change"}],createTime:[{required:!1,trigger:"change"}],updateBy:[{required:!1,trigger:"change"}],updateTime:[{required:!1,trigger:"change"}],remark:[{required:!1,trigger:"change"}]},h=C({rowKey:"noticeId",data:[],loading:!1,moduleName:"notice"}),S=C("table"),m=C({pageNum:1,pageSize:10,total:0,noticeTitle:"",noticeType:""}),f=C([]),Ue=[{label:"删除",key:"delete",icon:Y(X),async onClick(){await H(),k()}}],k=async()=>{h.value.loading=!0;const{data:o}=await G(m.value);h.value.data=o.rows,m.value.total=o.total,h.value.loading=!1},A=async o=>{let u=o||f.value[0];h.value.loading=!0;const{data:l}=await Z(u);l.data&&(r.value=l.data,I.value=!0),h.value.loading=!1},Se=async()=>{Ne(),I.value=!0},H=async o=>{let u=o?[o]:f.value;await j(ee,u),await k(),f.value=[]},Fe=b("span",null,"已选:",-1),ze=B({__name:"AXFooter",setup(o){const u=(l,c)=>{m.value.pageNum=l,m.value.pageSize=c,k()};return(l,c)=>{const a=te,_=R,s=N;return i(),g(s,{bordered:!1,class:"card__footer"},{default:n(()=>[t(_,{justify:"space-between",align:"center"},{default:n(()=>[b("div",null,[Fe,b("span",null,"（"+q(e(f).length)+"）",1)]),t(a,{total:e(m).total,current:e(m).pageNum,"page-size":e(m).pageSize,"show-size-changer":"",onChange:u,"show-quick-jumper":"","show-less-items":""},null,8,["total","current","page-size"])]),_:1})]),_:1})}}}),J=[{label:"通知",value:"1"},{label:"公告",value:"2"}],Ae={class:"flex-1"},Re=B({__name:"AXForm",setup(o){const u=C(!1),l=async()=>{u.value=!0,r.value.noticeId?await j(oe,r.value):await j(se,r.value),await k(),u.value=!1,I.value=!1};return(c,a)=>{const _=K,s=M,y=ie,p=ue,T=R,v=N,D=ce;return i(),g(D,{rules:e(Oe),model:e(r),onFinish:l,"wrapper-col":{span:8,offset:1},"label-col":{span:4,offset:4}},{default:n(()=>[t(ne,{title:"通知公告",visible:e(I),"onUpdate:visible":a[4]||(a[4]=d=>O(I)?I.value=d:null)},{default:n(()=>[t(v,{title:"编辑/新增"},{extra:n(()=>[t(_,{type:"primary",htmlType:"submit"},{default:n(()=>[$("保存")]),_:1})]),default:n(()=>[t(T,{justify:"space-between",wrap:"wrap",class:"mb-8"},{default:n(()=>[t(T,{gap:12,wrap:"wrap"},{default:n(()=>[t(s,{placeholder:"请输入标题",value:e(r).noticeTitle,"onUpdate:value":a[0]||(a[0]=d=>e(r).noticeTitle=d),style:{width:"200px"}},null,8,["value"]),t(p,{value:e(r).status,"onUpdate:value":a[1]||(a[1]=d=>e(r).status=d)},{default:n(()=>[(i(!0),x(F,null,z(e(ae),d=>(i(),g(y,{value:d.value},{default:n(()=>[$(q(d.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"]),t(p,{value:e(r).noticeType,"onUpdate:value":a[2]||(a[2]=d=>e(r).noticeType=d)},{default:n(()=>[(i(!0),x(F,null,z(e(J),d=>(i(),g(y,{value:d.value},{default:n(()=>[$(q(d.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"])]),_:1})]),_:1}),b("div",Ae,[t(e(le),{contentType:"html",theme:"snow",content:e(r).noticeContent,"onUpdate:content":a[3]||(a[3]=d=>e(r).noticeContent=d),style:{height:"390px"}},null,8,["content"])])]),_:1})]),_:1},8,["visible"])]),_:1},8,["rules","model"])}}}),E=C([{title:"公告ID",dataIndex:"noticeId"},{title:"公告标题",dataIndex:"noticeTitle"},{title:"公告类型（1通知 2公告）",dataIndex:"noticeType"},{title:"公告内容",dataIndex:"noticeContent"},{title:"公告状态（0正常 1关闭）",dataIndex:"status"},{title:"创建者",dataIndex:"createBy"},{title:"创建时间",dataIndex:"createTime"},{title:"更新者",dataIndex:"updateBy"},{title:"更新时间",dataIndex:"updateTime"},{title:"备注",dataIndex:"remark"}]),Ve=b("h3",{class:"text-14"},"公告列表",-1),je=B({__name:"AXHead",setup(o){return(u,l)=>{const c=M,a=re,_=K,s=R,y=de,p=_e,T=pe,v=me,D=X,d=fe,W=N,V=Q("perm");return i(),g(W,{class:"table__head"},{title:n(()=>[Ve]),default:n(()=>[t(s,{class:"mb-12",gap:12,wrap:"wrap"},{default:n(()=>[b("div",null,[t(c,{onBlur:e(k),value:e(m).noticeTitle,"onUpdate:value":l[0]||(l[0]=w=>e(m).noticeTitle=w),style:{width:"160px"},placeholder:"请输入公告标题","allow-clear":""},null,8,["onBlur","value"])]),b("div",null,[t(a,{value:e(m).noticeType,"onUpdate:value":l[1]||(l[1]=w=>e(m).noticeType=w),style:{width:"160px"},placeholder:"请选择公告类型","allow-clear":"",onBlur:e(k),options:e(J)},null,8,["value","onBlur","options"])]),b("div",null,[t(c,{onBlur:e(k),value:e(m).status,"onUpdate:value":l[2]||(l[2]=w=>e(m).status=w),style:{width:"160px"},placeholder:"请输入公告状态","allow-clear":""},null,8,["onBlur","value"])]),t(_,{type:"primary",onClick:e(k)},{default:n(()=>[$("搜索")]),_:1},8,["onClick"])]),_:1}),t(s,{justify:"space-between",align:"center"},{default:n(()=>[t(s,{justify:"space-between",align:"center"},{default:n(()=>[t(s,{align:"center",gap:4},{default:n(()=>[U((i(),x("div",null,[t(p,{title:"新建"},{default:n(()=>[t(_,{type:"primary",onClick:e(Se)},{default:n(()=>[t(y)]),_:1},8,["onClick"])]),_:1})])),[[V,"system:notice:add"]]),U((i(),x("div",null,[t(p,{title:"编辑"},{default:n(()=>[t(_,{type:"link",onClick:l[3]||(l[3]=w=>e(A)()),disabled:e(f).length!==1},{default:n(()=>[t(T)]),_:1},8,["disabled"])]),_:1})])),[[V,"system:notice:edit"]]),t(p,{title:"刷新"},{default:n(()=>[t(_,{type:"link",onClick:e(k)},{default:n(()=>[t(v)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),t(s,null,{default:n(()=>[U((i(),x("div",null,[t(d,{title:"确定要删除吗",disabled:e(f).length===0,placement:"bottomRight",onConfirm:l[4]||(l[4]=w=>e(H)())},{default:n(()=>[t(p,{title:"批量删除"},{default:n(()=>[t(_,{danger:"",type:"link",disabled:e(f).length===0},{default:n(()=>[t(D)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["disabled"])])),[[V,"system:notice:remove"]]),t(Ie,{columns:e(E),"module-name":e(h).moduleName},null,8,["columns","module-name"]),e(S)==="table"?(i(),g(p,{key:0,title:"卡片模式",onClick:l[5]||(l[5]=w=>S.value="card")},{default:n(()=>[t(_,{type:"link"},{default:n(()=>[t(e($e))]),_:1})]),_:1})):(i(),g(p,{key:1,title:"表格模式",onClick:l[6]||(l[6]=w=>S.value="table")},{default:n(()=>[t(_,{type:"link"},{default:n(()=>[t(e(Be))]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1})}}}),Ee=o=>{console.log("dragstart==",o.id)},Le=o=>{console.log("drop==",o.id)},Xe=o=>{f.value.includes(o.id)?f.value=f.value.filter(u=>u!==o.id):f.value.push(o.id)},L=ge(()=>{let o=[];return h.value.data.map((u,l)=>{let c=[];E.value.forEach((a,_)=>{const s=a.title,y=u[a.dataIndex];a.dataIndex!=="operation"&&c.push({label:s,value:y})}),o.push({id:u.websiteId,items:c,raw:u})}),o}),Ke=["onClick","onDblclick","onDragstart","onDrop"],Me={class:"index"},Qe=B({__name:"AXCard",setup(o){const u=C();return ve(()=>{ye(u,L.value,{animation:200,onUpdate(l){}})}),(l,c)=>{const a=ke,_=we,s=xe,y=N;return i(),g(y,{bordered:!1,"body-style":{padding:"0"}},{default:n(()=>[b("ul",{class:"table_card_list flex-1",ref_key:"cardRef",ref:u},[(i(!0),x(F,null,z(e(L),(p,T)=>(i(),x("li",{key:T,size:"small",onClick:v=>e(Xe)(p),class:be({active:e(f).includes(p.id)}),onDblclick:v=>e(A)(p.id),draggable:!0,onDragstart:v=>e(Ee)(p),onDrop:v=>e(Le)(p),onDragover:c[0]||(c[0]=v=>v.preventDefault())},[t(y,null,{default:n(()=>[b("div",Me,q(T+1),1),t(a,{title:"Europe Street beat",class:"mb-8"},{description:n(()=>[$("详细信息")]),_:1}),t(s,{column:1,layout:"horizontal",labelStyle:{width:"80px",color:"#666"}},{default:n(()=>[(i(!0),x(F,null,z(p.items,(v,D)=>(i(),g(_,{label:v.label,contentStyle:{fontWeight:D===0?"bold":""}},{default:n(()=>[$(q(v.value),1)]),_:2},1032,["label","contentStyle"]))),256))]),_:2},1024)]),_:2},1024)],42,Ke))),128))],512)]),_:1})}}}),Pe=he(Qe,[["__scopeId","data-v-97fdcfdd"]]),He={key:0},Je=B({__name:"AXTable",setup(o){const u=c=>{r.value=c},l=c=>{A(c)};return(c,a)=>{const _=Q("perm");return i(),g(qe,{columns:e(E),table:e(h),query:e(m),"onUpdate:query":a[0]||(a[0]=s=>O(m)?m.value=s:null),"selected-keys":e(f),"onUpdate:selectedKeys":a[1]||(a[1]=s=>O(f)?f.value=s:null),form:e(r),"onUpdate:form":a[2]||(a[2]=s=>O(r)?r.value=s:null),onDblclick:l},{default:n(({value:s})=>[s.column.dataIndex==="operation"?U((i(),x("div",He,[t(De,{loading:e(h).loading,onOpenChange:y=>u(s.record),onOnClick:y=>e(A)(s.record.noticeId),items:e(Ue)},null,8,["loading","onOpenChange","onOnClick","items"])])),[[_,"sys-notice-edit"]]):Ce("",!0)]),_:1},8,["columns","table","query","selected-keys","form"])}}}),We={class:"data__content"},at=B({__name:"index",setup(o){return Te(()=>{k()}),(u,l)=>{const c=R,a=N;return i(),g(a,{class:"system__template","body-style":{height:"100%",overflow:"hidden",paddingBottom:"0"}},{default:n(()=>[t(c,{vertical:"",class:"h-100"},{default:n(()=>[t(je),b("div",We,[e(S)==="table"?(i(),g(Je,{key:0})):(i(),g(Pe,{key:1}))]),t(ze),t(Re)]),_:1})]),_:1})}}});export{at as default};
