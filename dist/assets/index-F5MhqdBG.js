import{g as y,r as i,d as N,o as g,e as T,w as a,f as c,a as e,u as t,am as L,K as U,i as I,S as M,k as S,L as R,ai as j,at as E,ak as h,aj as z,B as q,F as D,ag as G,ah as Q,aF as A,P as H,v as J,c as V,x as W,l as X,n as Y,p as Z,aG as ee,a5 as te,a6 as oe}from"./index-HxNFWFwR.js";import ae from"./post-B4Cx-FhE.js";import{_ as se}from"./TableHead-D-Q4jVMf.js";import{F as ne}from"./Field-Vd8OBjEs.js";import{_ as le}from"./SystemTable.vue_vue_type_script_setup_true_lang-1XGIZ7ZX.js";const ue=o=>y.get("system/post/list",{params:o}),_e=o=>y.delete(`system/post/${o.join(",")}`),re=o=>y.get(`system/post/${o}`),pe=o=>y.post("system/post",o),de=o=>y.put("system/post",o),f=i(!1);let K={createBy:"",createTime:"",remark:"",postId:0,postCode:"",postName:"",postSort:0,status:"0",flag:!1};const s=i({...K}),me=()=>{s.value={...K}},ie={class:"p-12"},ce={class:"text-center"},fe=["src"],ve=N({__name:"PostForm",setup(o){const r=()=>{s.value.postId?S(de,s.value):S(pe,s.value)};return(l,n)=>{const d=R,p=j,b=E,P=h,x=z,C=q,_=D,$=G,O=Q;return g(),T(M,{visible:t(f),"onUpdate:visible":n[5]||(n[5]=u=>I(f)?f.value=u:null),title:"Post config"},{default:a(()=>[c("div",ie,[e(O,null,{default:a(()=>[e($,{span:12,offset:6},{default:a(()=>[c("div",ce,[c("img",{src:t(ae),width:"48"},null,8,fe)]),e(_,{model:t(s),layout:"vertical",onFinish:r},{default:a(()=>[e(p,{label:"Post name",name:"postName",required:""},{default:a(()=>[e(d,{value:t(s).postName,"onUpdate:value":n[0]||(n[0]=u=>t(s).postName=u),placeholder:"Please enter post name"},null,8,["value"])]),_:1}),e(p,{label:"Post code",name:"postCode",required:""},{default:a(()=>[e(d,{value:t(s).postCode,"onUpdate:value":n[1]||(n[1]=u=>t(s).postCode=u),placeholder:"Please enter post code"},null,8,["value"])]),_:1}),e(p,{label:"Sort",name:"postSort",required:""},{default:a(()=>[e(b,{min:0,class:"w-100",placeholder:"Sort",value:t(s).postSort,"onUpdate:value":n[2]||(n[2]=u=>t(s).postSort=u)},null,8,["value"])]),_:1}),e(p,{label:"Remark",name:"remark",required:""},{default:a(()=>[e(P,{value:t(s).remark,"onUpdate:value":n[3]||(n[3]=u=>t(s).remark=u),placeholder:"Please enter remark"},null,8,["value"])]),_:1}),e(p,{label:"Status",name:"status",required:""},{default:a(()=>[e(x,{value:t(s).status,"onUpdate:value":n[4]||(n[4]=u=>t(s).status=u),options:t(L)},null,8,["value","options"])]),_:1}),e(C,{type:"primary",htmlType:"submit"},{default:a(()=>[U("Submit")]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})])]),_:1},8,["visible"])}}}),k=i([{title:"岗位名称",dataIndex:"postName",key:"postName"},{title:"岗位编码",dataIndex:"postCode",key:"postCode"},{title:"创建人",dataIndex:"createBy",key:"createBy"},{title:"创建时间",dataIndex:"createTime",key:"createTime"},{title:"更新时间",dataIndex:"updateTime",key:"updateTime"},{title:"备注",dataIndex:"remark",key:"remark"},{title:"状态",dataIndex:"status",key:"status"}]),v=i({rowKey:"postId",data:[],loading:!1,moduleName:"post"}),w=i({total:0,pageSize:20,pageNum:1}),m=i([]),F=async()=>{v.value.loading=!0;const{data:o}=await ue(w.value);v.value.data=o.rows,w.value.total=o.total,v.value.loading=!1},ye=o=>{A(async()=>{let r=[];r=o?[o]:m.value;const{data:l}=await _e(r);H.success(l.msg)})},B=async o=>{let r=-1;r=o||m.value[0];const{data:l}=await re(r);l.data&&(s.value=l.data,f.value=!0)},ke=()=>{me(),f.value=!0},ge={class:"flex gc-4"},be=N({__name:"PostTable",setup(o){return J(async()=>{await F()}),(r,l)=>{const n=X,d=q,p=Y,b=Z,P=ee,x=te,C=oe;return g(),V("div",null,[e(se,{title:"岗位管理"},{default:a(()=>[c("div",ge,[e(d,{type:"primary",onClick:t(ke)},{default:a(()=>[e(n)]),_:1},8,["onClick"]),e(d,{disabled:t(m).length!==1,onClick:l[0]||(l[0]=_=>t(B)())},{default:a(()=>[e(p)]),_:1},8,["disabled"]),e(d,{onClick:t(F)},{default:a(()=>[e(b)]),_:1},8,["onClick"])]),c("div",null,[e(ne,{columns:t(k),"onUpdate:columns":l[1]||(l[1]=_=>I(k)?k.value=_:null),"module-name":t(v).moduleName},null,8,["columns","module-name"])])]),_:1}),e(le,{table:t(v),query:t(w),columns:t(k),"selected-keys":t(m),"onUpdate:selectedKeys":l[2]||(l[2]=_=>I(m)?m.value=_:null)},{default:a(({value:_})=>[_.column.key==="operation"?(g(),T(C,{key:0,trigger:"click",onClick:$=>t(B)(_.record.postId)},{overlay:a(()=>[e(x,null,{default:a(()=>[e(P,{key:"delete",onClick:$=>t(ye)(_.record.postId)},{default:a(()=>[U("Delete")]),_:2},1032,["onClick"])]),_:2},1024)]),default:a(()=>[e(p)]),_:2},1032,["onClick"])):W("",!0)]),_:1},8,["table","query","columns","selected-keys"])])}}}),Pe={class:"system-module"},Ne=N({__name:"index",setup(o){return(r,l)=>(g(),V("div",Pe,[e(be),e(ve)]))}});export{Ne as default};
