import{b as o,A as j,g as f,$ as B,o as c,i as g,w as s,a0 as U,j as F,B as k,C as I,_ as q,r as _,y as M,u as l,l as x,f as O,N as P,a as L,q as D,s as V,R as A,P as T,T as H,U as R,d as Y,h as z,c as N,F as E,t as K,a1 as Q,W,M as G}from"./index-ChYhKE93.js";import{_ as J}from"./SystemTable.vue_vue_type_script_setup_true_lang-BKAfEwG2.js";import{F as X}from"./Field-CM81GgWv.js";var Z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 732h-70.3c-4.8 0-9.3 2.1-12.3 5.8-7 8.5-14.5 16.7-22.4 24.5a353.84 353.84 0 01-112.7 75.9A352.8 352.8 0 01512.4 866c-47.9 0-94.3-9.4-137.9-27.8a353.84 353.84 0 01-112.7-75.9 353.28 353.28 0 01-76-112.5C167.3 606.2 158 559.9 158 512s9.4-94.2 27.8-137.8c17.8-42.1 43.4-80 76-112.5s70.5-58.1 112.7-75.9c43.6-18.4 90-27.8 137.9-27.8 47.9 0 94.3 9.3 137.9 27.8 42.2 17.8 80.1 43.4 112.7 75.9 7.9 7.9 15.3 16.1 22.4 24.5 3 3.7 7.6 5.8 12.3 5.8H868c6.3 0 10.2-7 6.7-12.3C798 160.5 663.8 81.6 511.3 82 271.7 82.6 79.6 277.1 82 516.4 84.4 751.9 276.2 942 512.4 942c152.1 0 285.7-78.8 362.3-197.7 3.4-5.3-.4-12.3-6.7-12.3zm88.9-226.3L815 393.7c-5.3-4.2-13-.4-13 6.3v76H488c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h314v76c0 6.7 7.8 10.5 13 6.3l141.9-112a8 8 0 000-12.6z"}}]},name:"logout",theme:"outlined"};const ee=Z;function S(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},a=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(e).filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),a.forEach(function(r){te(n,r,e[r])})}return n}function te(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var $=function(t,e){var a=S({},t,e.attrs);return o(j,S({},a,{icon:ee}),null)};$.displayName="LogoutOutlined";$.inheritAttrs=!1;const ne=$,oe=f({__name:"FormFooter",props:{justify:{default:"left"},position:{default:"sticky"},loading:{type:Boolean}},setup(n){return B(t=>({"1f4f7342":t.position,"11ad2d52":t.justify})),(t,e)=>{const a=k,r=I;return c(),g(r,{class:"form__footer flex"},{default:s(()=>[U(t.$slots,"default",{},()=>[o(a,{type:"primary",loading:t.loading,htmlType:"submit"},{default:s(()=>[F("保存")]),_:1},8,["loading"])],!0)]),_:3})}}}),ae=q(oe,[["__scopeId","data-v-2ddab699"]]),h=_(!1),le={},se=_({...le}),re={class:"h-100 flex flex-col"},ie=O("div",{class:"flex-1 p-8"}," Lorem ipsum dolor sit amet consectetur, adipisicing elit. Atque excepturi nesciunt cupiditate vero fugit exercitationem eius voluptas a, expedita placeat nobis quas labore libero, provident officiis ratione sint quaerat laboriosam? ",-1),ue=f({__name:"form",setup(n){return(t,e)=>{const a=ae,r=P;return c(),g(r,{model:l(se)},{default:s(()=>[o(M,{title:"Untitled",visible:l(h),"onUpdate:visible":e[0]||(e[0]=m=>x(h)?h.value=m:null)},{default:s(()=>[O("div",re,[ie,o(a)])]),_:1},8,["visible"])]),_:1},8,["model"])}}}),y=_([{title:"令牌ID",dataIndex:"tokenId",show:!0},{title:"部门名称",dataIndex:"deptName",show:!0},{title:"用户名",dataIndex:"userName",show:!0},{title:"IP地址",dataIndex:"ipaddr",show:!0},{title:"登录位置",dataIndex:"loginLocation",show:!0},{title:"浏览器",dataIndex:"browser",show:!0},{title:"操作系统",dataIndex:"os",show:!0},{title:"登录时间",dataIndex:"loginTime",show:!0}]),ce=n=>L.get("monitor/online/list",{params:n}),de=n=>L.delete(`monitor/online/${n}`),b=_({rowKey:"tokenId",data:[],loading:!1,moduleName:"menu"}),u=_({pageNum:1,pageSize:10,total:0,ipaddr:"",userName:""}),w=_([]);D(V);const d=async()=>{b.value.loading=!0;const{data:n}=await ce(u.value);b.value.data=n.rows,u.value.total=n.total,b.value.loading=!1},_e=O("h3",{class:"text-14"},"在线用户",-1),me=f({__name:"head",setup(n){return(t,e)=>{const a=k,r=T,m=H,v=R,i=Y,C=I;return c(),g(C,{class:"table__head"},{title:s(()=>[_e]),default:s(()=>[o(i,{justify:"space-between",align:"center"},{default:s(()=>[o(i,{gap:4,align:"center"},{default:s(()=>[o(r,{title:"刷新"},{default:s(()=>[o(a,{type:"link",onClick:l(d)},{default:s(()=>[o(l(A))]),_:1},8,["onClick"])]),_:1}),o(m,{type:"vertical"}),o(v,{placeholder:"请输入登录地址","allow-clear":"",onSearch:l(d),value:l(u).ipaddr,"onUpdate:value":e[0]||(e[0]=p=>l(u).ipaddr=p)},null,8,["onSearch","value"]),o(v,{placeholder:"请输入用户名","allow-clear":"",onSearch:l(d),value:l(u).userName,"onUpdate:value":e[1]||(e[1]=p=>l(u).userName=p)},null,8,["onSearch","value"])]),_:1}),o(X,{"module-name":"online",columns:l(y),"onUpdate:columns":e[2]||(e[2]=p=>x(y)?y.value=p:null)},null,8,["columns"])]),_:1})]),_:1})}}}),pe=f({__name:"table",setup(n){const t=e=>{G.confirm({title:"提示",content:"确定要强制下线吗？",okText:"确定",cancelText:"取消",centered:!0,onOk:()=>{de(e).then(()=>{d()})}})};return z(()=>{d()}),(e,a)=>{const r=ne,m=k,v=T;return c(),N("div",null,[o(me),o(J,{columns:l(y),table:l(b),query:l(u),"onUpdate:query":a[0]||(a[0]=i=>x(u)?u.value=i:null),"selected-keys":l(w),"onUpdate:selectedKeys":a[1]||(a[1]=i=>x(w)?w.value=i:null),onReload:l(d),class:"mt-12"},{default:s(({value:i})=>[i.column.dataIndex==="operation"?(c(),g(v,{key:0,title:"强制下线"},{default:s(()=>[o(m,{type:"text",danger:"",onClick:C=>t(i.record.tokenId)},{default:s(()=>[o(r)]),_:2},1032,["onClick"])]),_:2},1024)):i.column.dataIndex==="loginTime"?(c(),N(E,{key:1},[F(K(l(Q)(i.record.loginTime,"YYYY-MM-DD HH:mm:ss").value),1)],64)):W("",!0)]),_:1},8,["columns","table","query","selected-keys","onReload"])])}}}),ye=f({__name:"index",setup(n){return(t,e)=>{const a=I;return c(),g(a,{class:"system__module"},{default:s(()=>[o(pe),o(ue)]),_:1})}}});export{ye as default};
