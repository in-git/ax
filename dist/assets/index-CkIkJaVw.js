import{a as b,r,v as Ee,M as ae,g as D,o as p,c as k,b as t,w as s,f as d,u as e,i as w,j as x,a0 as Qe,F as le,V as O,l as M,y as X,at as Be,T as se,B as N,O as q,a2 as Se,_ as J,a7 as Y,h as ne,Q as oe,ag as ue,s as we,N as xe,R as ce,P as Ue,p as V,e as z,k as Re,t as $,c8 as Ke,S as de,Z as ie,c9 as De,d as re,C as _e,I as pe,H as me,aA as Je,ax as Fe,an as Te,K as Oe,E as Me,az as Ye,ca as Le,G as Ne,L as ve,ae as Ve,cb as ze}from"./index-BREUmBWG.js";import je from"./role-CL2RSENu.js";import{_ as He}from"./TableHead-BlXsGXq_.js";import{C as Ze,U as Ge,_ as We}from"./UserDeleteOutlined-5XPTgpvU.js";const Pe=[{title:"用户名",dataIndex:"userName"},{title:"昵称",dataIndex:"nickName"},{title:"邮箱",dataIndex:"email"},{title:"备注",dataIndex:"remark"}],Xe=a=>b.get("system/role/list",{params:a}),qe=a=>b.get(`system/menu/roleMenuTreeselect/${a}`),$e=()=>b.get("system/menu/treeselect"),et=a=>b.get(`system/role/deptTree/${a}`),tt=a=>b.put("system/role/dataScope",a),at=a=>b.put("system/role",a),lt=a=>b.post("system/role",a),st=a=>b.delete(`system/role/${a}`),nt=a=>b.get("system/role/authUser/allocatedList",{params:a}),ot=a=>b.get("system/role/authUser/unallocatedList",{params:a}),ut=(a,o)=>b.put(`system/role/authUser/cancelAll?roleId=${a}&userIds=${o.join(",")}`),ct=(a,o)=>b.put(`system/role/authUser/selectAll?roleId=${a}&userIds=${o.join(",")}`),W=r(!0),E=r({data:[],roleMenus:[],deptList:[]}),P=r({pageNum:1,pageSize:10,roleName:"",total:0}),l=r(),dt={roleId:0,roleName:"",roleKey:"",roleSort:0,dataScope:"",menuCheckStrictly:!1,deptCheckStrictly:!1,status:"0",flag:!1,menuIds:[],admin:!1},K=r(!1),ge=async()=>{if(l.value){L.value=!0,h.value.roleId=l.value.roleId;const{data:a}=await ot(h.value);C.value.data=a.rows,h.value.total=a.total,L.value=!1,K.value=!0,F.value={title:"已分配用户",mode:"assign"}}},fe=async()=>{if(!l.value)return;h.value.roleId=l.value.roleId;const{data:a}=await nt(h.value);K.value=!0,C.value.data=a.rows,h.value.total=a.total,L.value=!1,F.value={title:"取消分配",mode:"unassign"}},L=r(!1),C=r({data:[],selectedKeys:[]}),h=r({pageNum:1,pageSize:10,total:0,roleId:void 0}),it=a=>{C.value.selectedKeys=a.map(o=>Number(o))},F=r({title:"",mode:""}),ee=async a=>{if(!l.value)return;let o=a?[a]:C.value.selectedKeys;await Ee(ct,l.value.roleId,[o]),await ge(),C.value.selectedKeys=[]},te=async a=>{let o=a?[a]:C.value.selectedKeys;ae.confirm({title:"警告",content:"该操作可能影响系统运行",async onOk(){l.value&&(await ut(l.value.roleId,o),await fe(),C.value.selectedKeys=[])},centered:!0})},rt={class:"py-8 px-12 flex justify-between"},_t={class:"user-list p-8"},pt=D({__name:"RoleAssign",setup(a){return(o,c)=>{const m=Be,v=se,f=N,u=q,n=Se;return p(),k("div",null,[t(X,{w:"90%",h:"90%",visible:e(K),"onUpdate:visible":[c[2]||(c[2]=i=>M(K)?K.value=i:null),c[3]||(c[3]=i=>K.value=!1)],title:"【新增|取消】授权"},{default:s(()=>[d("div",null,[t(m,{title:e(F).title,class:"py-0 page-border px-12"},null,8,["title"]),d("div",rt,[d("div",null,[t(v,{placeholder:"请输入身份名"})]),e(F).mode!=="unassign"?(p(),w(f,{key:0,disabled:e(C).selectedKeys.length===0,type:"primary",onClick:c[0]||(c[0]=i=>e(ee)())},{default:s(()=>[x(" 批量授权 ")]),_:1},8,["disabled"])):(p(),w(f,{key:1,type:"primary",disabled:e(C).selectedKeys.length===0,onClick:c[1]||(c[1]=i=>e(te)()),danger:""},{default:s(()=>[x(" 批量取消 ")]),_:1},8,["disabled"]))]),d("div",_t,[t(n,{columns:e(Qe)(e(Pe)),loading:e(L),"data-source":e(C).data,pagination:{total:e(h).total,current:e(h).pageNum,pageSize:e(h).pageSize},"row-selection":{selectedRowKeys:e(C).selectedKeys,onChange:e(it)},"row-key":"userId"},{bodyCell:s(({column:i,record:y})=>[i.dataIndex==="operation"?(p(),k(le,{key:0},[e(F).mode==="unassign"?(p(),w(u,{key:0,title:""},{default:s(()=>[t(f,{type:"link",style:{color:"#fc6d6d"},onClick:I=>e(te)(y.userId)},{default:s(()=>[x(" 取消授权 ")]),_:2},1032,["onClick"])]),_:2},1024)):(p(),w(u,{key:1,title:""},{default:s(()=>[t(f,{type:"link",style:{color:"green"},onClick:I=>e(ee)(y.userId)},{default:s(()=>[x(" 授权 ")]),_:2},1032,["onClick"])]),_:2},1024))],64)):O("",!0)]),_:1},8,["columns","loading","data-source","pagination","row-selection"])])])]),_:1},8,["visible"])])}}}),mt=J(pt,[["__scopeId","data-v-9d319d16"]]),vt="data:image/png;base64,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",gt="/ax/assets/role-ByePIYnt.png",ft="/ax/assets/users-BXJH_1Yg.png",Q=r(!1);r([{value:"info",payload:{title:"Info",image:gt}},{value:"resource",payload:{title:"Resource",image:vt}},{value:"users",payload:{title:"User",image:ft}}]);const ye=async a=>{let o=0;a?o=a:l.value&&(o=l.value.roleId);const{data:c}=await qe(o);l.value&&(E.value.roleMenus=c.menus,l.value.menuIds=c.checkedKeys),Q.value=!0},yt=async a=>{if(l.value){const{data:o}=await et(a);E.value.deptList=o.depts,l.value.deptIds=o.checkedKeys}},U=async()=>{W.value=!0;const{data:a}=await Xe(P.value);E.value.data=a.rows,W.value=!1},It=()=>{ae.confirm({title:"警告",content:"该操作可能影响系统运行",async onOk(){var a;if(l.value&&l.value.roleId){const{data:o}=await st((a=l.value)==null?void 0:a.roleId);await U(),Y.success(o.msg)}},centered:!0})},Ie=()=>{l.value={...dt}},S=r(!1),Ae=async()=>{l.value&&(await yt(l.value.roleId),S.value=!0)},At=[{value:"1",label:"全部数据权限"},{value:"2",label:"自定数据权限"},{value:"3",label:"本部门数据权限"},{value:"4",label:"本部门及以下数据权限"},{value:"5",label:"仅本人数据权限"}],bt=a=>(V("data-v-95102589"),a=a(),z(),a),Ct={class:"flex gc-4 align-center"},kt=bt(()=>d("span",{class:"system-subtitle"},"编辑/权限:",-1)),ht=D({__name:"CardHead",setup(a){const o=async()=>{const{data:m}=await $e();m.data&&(E.value.roleMenus=m.data),Q.value=!0,Ie()};ne(async()=>{await U()});const c=()=>!(l.value&&l.value.roleId);return(m,v)=>{const f=xe,u=N,n=q,i=se,y=ce,I=Ue,B=We,g=He;return p(),k("div",null,[t(g,{title:"身份列表展示"},{default:s(()=>[d("div",Ct,[t(u,{type:"primary",onClick:o},{default:s(()=>[t(f)]),_:1}),t(n,{title:"重新加载"},{default:s(()=>[t(u,{type:"link",onClick:e(U)},{default:s(()=>[t(e(oe))]),_:1},8,["onClick"])]),_:1}),t(i,{placeholder:"请输入角色名",value:e(P).roleName,"onUpdate:value":v[0]||(v[0]=R=>e(P).roleName=R),onSearch:e(U),"allow-clear":""},null,8,["value","onSearch"]),t(y,{type:"vertical"}),d("div",{class:ue(["flex gc-2 text-nowrap align-center",[c()?"gray":"active"]])},[kt,t(n,{title:"编辑基础信息"},{default:s(()=>[t(u,{type:"text",onClick:v[1]||(v[1]=R=>e(ye)()),disabled:!e(l)},{default:s(()=>[t(I,{class:"icon"})]),_:1},8,["disabled"])]),_:1}),t(n,{title:"分配资源",onClick:e(Ae)},{default:s(()=>[t(u,{type:"text",disabled:!e(l)},{default:s(()=>[t(e(Ze),{class:"icon"})]),_:1},8,["disabled"])]),_:1},8,["onClick"]),t(n,{title:"分配人员"},{default:s(()=>[t(u,{type:"text",disabled:!e(l),onClick:e(ge)},{default:s(()=>[t(B,{class:"icon"})]),_:1},8,["disabled","onClick"])]),_:1}),t(n,{title:"取消分配"},{default:s(()=>[t(u,{type:"text",disabled:!e(l),onClick:e(fe)},{default:s(()=>[t(e(Ge),{class:"text-danger"})]),_:1},8,["disabled","onClick"])]),_:1})],2)]),d("div",null,[t(u,{type:"link",danger:"",onClick:e(It),disabled:c()},{default:s(()=>[t(e(we))]),_:1},8,["onClick","disabled"])])]),_:1})])}}}),Et=J(ht,[["__scopeId","data-v-95102589"]]),Qt=a=>(V("data-v-bab07c15"),a=a(),z(),a),Bt={class:"role-card"},St={class:"card-list"},wt=["onClick","onDblclick"],xt=["src"],Ut={class:"text-14"},Rt={class:"desc mt-8 text-12"},Kt=Qt(()=>d("span",{class:"system-subtitle"},"没有更多了",-1)),Dt=D({__name:"RoleCard",setup(a){const o=c=>{l.value=Ke(c).cloned.value};return ne(async()=>{await U()}),(c,m)=>{const v=de,f=ce;return p(),k("div",Bt,[t(Et),d("div",St,[t(v,{spinning:e(W)},{default:s(()=>[d("ul",null,[(p(!0),k(le,null,Re(e(E).data,u=>{var n;return p(),k("li",{class:ue([{active:((n=e(l))==null?void 0:n.roleId)===u.roleId},"text-center"]),onClick:i=>o(u),onDblclick:i=>e(ye)(u.roleId)},[d("img",{src:e(je),width:"32",height:"32"},null,8,xt),d("div",null,[d("div",Ut,$(u.roleName),1),d("div",Rt,$(u.remark),1)])],42,wt)}),256))])]),_:1},8,["spinning"]),t(f,{dashed:""},{default:s(()=>[Kt]),_:1})])])}}}),Jt=J(Dt,[["__scopeId","data-v-bab07c15"]]),be=a=>(V("data-v-14b8b613"),a=a(),z(),a),Ft={key:0,class:"h-100 flex flex-col"},Tt={class:"flex-1"},Ot=be(()=>d("div",null,"身份管理",-1)),Mt={class:"text-12 system-subtitle"},Yt={class:"flex align-center mb-8"},Lt=be(()=>d("span",{class:"text-12 system-subtitle mr-4"},"父子关联",-1)),Nt=D({__name:"RoleInfo",setup(a){const o=r([]),c=r(!1),m=r(),v=r(!1),f=async()=>{if(c.value=!0,l.value){let u=l.value.menuIds;const n=m.value.halfCheckedKeys;let i=[];if(u.checked?i=u.checked.concat(u.halfCheckedKeys||[]):i=l.value.menuIds,n&&n.length>0&&(i=i.concat(n)),i=Array.from(new Set(i)),l.value.roleId){const{data:y}=await at({...l.value,menuIds:i});Y.success(y.msg)}else{const{data:y}=await lt(l.value);Y.success(y.msg)}c.value=!1,await U(),Ie(),Q.value=!1}};return ie(E,()=>{o.value=E.value.roleMenus},{deep:!0,immediate:!0}),(u,n)=>{const i=N,y=re,I=_e,B=pe,g=me,R=Je,j=Fe,H=Te,Z=Oe,T=Me,G=Ye,A=Le,ke=Ne,he=ve;return p(),w(he,{model:e(l),onFinish:f,layout:"vertical"},{default:s(()=>[t(X,{w:"90%",h:"90%",visible:e(Q),"onUpdate:visible":[n[7]||(n[7]=_=>M(Q)?Q.value=_:null),n[8]||(n[8]=_=>Q.value=!1)],title:"管理身份"},{default:s(()=>[e(Q)&&e(l)?(p(),k("div",Ft,[d("div",Tt,[t(I,{class:"table__head"},{default:s(()=>[t(y,{justify:"space-between"},{default:s(()=>[Ot,t(i,{type:"primary",loading:e(c),htmlType:"submit"},{default:s(()=>[x("保存")]),_:1},8,["loading"])]),_:1})]),_:1}),t(I,{class:"mt-12"},{default:s(()=>[t(ke,null,{default:s(()=>[t(T,{span:12},{default:s(()=>[t(I,{bordered:!1},{default:s(()=>[t(g,{label:"身份名",name:"roleName",required:""},{default:s(()=>[t(B,{value:e(l).roleName,"onUpdate:value":n[0]||(n[0]=_=>e(l).roleName=_)},null,8,["value"])]),_:1}),t(g,{label:"排序",name:"roleSort",required:""},{default:s(()=>[t(R,{class:"w-100",value:e(l).roleSort,"onUpdate:value":n[1]||(n[1]=_=>e(l).roleSort=_)},null,8,["value"]),d("div",Mt,[t(j),x(" 数字越小，排序靠前 ")])]),_:1}),t(g,{label:"身份标识",name:"roleKey",required:""},{default:s(()=>[t(B,{class:"w-100",value:e(l).roleKey,"onUpdate:value":n[2]||(n[2]=_=>e(l).roleKey=_)},null,8,["value"])]),_:1}),t(g,{label:"身份描叙",name:"remark"},{default:s(()=>[t(H,{autoSize:{minRows:2,maxRows:4},value:e(l).remark,"onUpdate:value":n[3]||(n[3]=_=>e(l).remark=_),placeholder:"用于描述该身份的作用"},null,8,["value"])]),_:1}),t(g,{label:"状态",required:""},{default:s(()=>[t(Z,{options:e(De)("启用","禁用"),value:e(l).status,"onUpdate:value":n[4]||(n[4]=_=>e(l).status=_)},null,8,["options","value"])]),_:1})]),_:1})]),_:1}),t(T,{span:12},{default:s(()=>[t(I,{class:"mt-8",bordered:!1},{default:s(()=>[t(g,{label:"分配菜单","label-col":{span:24}},{default:s(()=>[d("div",Yt,[Lt,t(G,{checked:e(v),"onUpdate:checked":n[5]||(n[5]=_=>M(v)?v.value=_:null)},null,8,["checked"])]),t(I,{"body-style":{height:"370px",overflowY:"auto"}},{default:s(()=>[t(A,{treeData:e(o),checkable:"","block-node":"",selectable:!1,"checked-keys":e(l).menuIds,"onUpdate:checkedKeys":n[6]||(n[6]=_=>e(l).menuIds=_),fieldNames:{key:"id",title:"label"},"default-expand-parent":"","check-strictly":!e(v),ref_key:"treeRef",ref:m},null,8,["treeData","checked-keys","check-strictly"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])])):O("",!0)]),_:1},8,["visible"])]),_:1},8,["model"])}}}),Vt=J(Nt,[["__scopeId","data-v-14b8b613"]]),Ce=a=>(V("data-v-d2b1bf8e"),a=a(),z(),a),zt=Ce(()=>d("div",null,[d("h2",null,"资源分配")],-1)),jt={key:0,class:"mt-12"},Ht=Ce(()=>d("span",{class:"system-subtitle"},"部门列表",-1)),Zt=D({__name:"RoleResource",setup(a){const o=r(),c=r(),m=r(),v=async()=>{if(!l.value)return;const u=l.value.deptIds;l.value.deptIds instanceof Array||(l.value.deptIds=u.checked.concat(u.halfChecked));const{data:n}=await tt(l.value);Y.success(n.msg),S.value=!1,U()},f=async()=>{m.value=!0,await Ae(),m.value=!1};return ie(E,()=>{o.value=E.value.deptList,m.value=!1},{deep:!0,immediate:!0}),(u,n)=>{const i=N,y=re,I=_e,B=pe,g=me,R=Ve,j=oe,H=q,Z=ze,T=de,G=ve;return p(),w(G,{model:e(l),onFinish:v,"wrapper-col":{span:8},"label-col":{span:4}},{default:s(()=>[t(X,{w:"90%",h:"90%",visible:e(S),"onUpdate:visible":[n[4]||(n[4]=A=>M(S)?S.value=A:null),n[5]||(n[5]=A=>S.value=!1)],title:"身份资源分配"},{default:s(()=>[t(I,null,{default:s(()=>[t(y,{justify:"space-between"},{default:s(()=>[zt,t(i,{type:"primary",loading:e(m),htmlType:"submit"},{default:s(()=>[x("保存")]),_:1},8,["loading"])]),_:1})]),_:1}),e(S)&&e(l)?(p(),k("div",jt,[t(I,null,{default:s(()=>[t(g,{label:"身份名",name:"roleName",required:""},{default:s(()=>[t(B,{value:e(l).roleName,"onUpdate:value":n[0]||(n[0]=A=>e(l).roleName=A),disabled:""},null,8,["value"])]),_:1}),t(g,{label:"身份标识",name:"roleKey",required:""},{default:s(()=>[t(B,{value:e(l).roleKey,"onUpdate:value":n[1]||(n[1]=A=>e(l).roleKey=A),disabled:""},null,8,["value"])]),_:1}),t(g,{label:"范围",name:"dataScope",required:""},{default:s(()=>[t(R,{value:e(l).dataScope,"onUpdate:value":n[2]||(n[2]=A=>e(l).dataScope=A),options:e(At)},null,8,["value","options"])]),_:1}),e(l).dataScope==="2"?(p(),w(g,{key:0,name:"deptIds",required:"",label:"选择部门"},{default:s(()=>[d("div",{onClick:f,class:"mb-12 flex justify-between"},[Ht,t(H,{title:"刷新"},{default:s(()=>[t(i,{type:"ghost"},{default:s(()=>[t(j)]),_:1})]),_:1})]),t(T,{spinning:e(m)},{default:s(()=>[t(Z,{"tree-data":e(o),"field-names":{key:"id",title:"label"},selectable:"","selected-keys":e(l).deptIds,"onUpdate:selectedKeys":n[3]||(n[3]=A=>e(l).deptIds=A),ref_key:"treeRef",ref:c},null,8,["tree-data","selected-keys"])]),_:1},8,["spinning"])]),_:1})):O("",!0)]),_:1})])):O("",!0)]),_:1},8,["visible"])]),_:1},8,["model"])}}}),Gt=J(Zt,[["__scopeId","data-v-d2b1bf8e"]]),Wt={class:"role system__module flex"},Pt=D({__name:"index",setup(a){return(o,c)=>(p(),k("div",Wt,[t(Jt),t(Vt),t(Gt),t(mt)]))}}),ta=J(Pt,[["__scopeId","data-v-777a684e"]]);export{ta as default};
