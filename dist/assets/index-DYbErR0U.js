import{f as B,c as w}from"./feedback-DwYA81wN.js";import{g as z,r as u,ad as N,h as $,o as d,i as x,w as e,b as s,u as a,j as _,f as y,c as F,F as D,k as V,ae as A,t as p,l as L,B as R,Z as T,af as U,C as j,d as q,S as E,ag as M,_ as Z}from"./index-BwH1N0EP.js";const G={vertical:"",class:"list flex-1"},H={class:"system__subtitle"},J=z({__name:"index",setup(K){const f=u([]),t=u(!1),o=u(""),c=N(),l=u({pageNum:1,pageSize:20,total:0,orderByColumn:"create_time",isAsc:"desc"}),i=async()=>{try{t.value=!0;const{data:r}=await B(l.value);f.value=r.rows,l.value.total=r.total,t.value=!1}catch{t.value=!1}},b=async()=>{t.value=!0,c.$state.userInfo&&(await w({feedbackContent:o.value,type:"",nickname:c.$state.userInfo.nickName||"匿名用户",deptId:c.$state.userInfo.deptId,avatar:c.$state.userInfo.avatar}),o.value="",i())};return $(()=>{i()}),(r,m)=>{const g=R,C=T,I=U,v=j,k=q,S=E,h=M;return d(),x(v,{class:"system__template"},{extra:e(()=>[s(g,{onClick:i,loading:a(t)},{default:e(()=>[_("刷新")]),_:1},8,["loading"])]),title:e(()=>[s(C,{current:a(l).pageNum,"page-size":a(l).pageSize,total:a(l).total},null,8,["current","page-size","total"])]),default:e(()=>[y("div",G,[s(S,{spinning:a(t)},{default:e(()=>[s(k,{vertical:"",gap:8},{default:e(()=>[(d(!0),F(D,null,V(a(f),n=>(d(),x(v,null,{title:e(()=>[s(I,{size:24,src:a(A)(`avatar/${n.avatar}`)},null,8,["src"]),_(" "+p(n.nickname),1)]),extra:e(()=>[y("span",H,p(n.createTime),1)]),default:e(()=>[_(" "+p(n.feedbackContent)+" ",1)]),_:2},1024))),256))]),_:1})]),_:1},8,["spinning"])]),s(k,{class:"relative"},{default:e(()=>[s(h,{maxlength:140,disabled:a(t),value:a(o),"onUpdate:value":m[0]||(m[0]=n=>L(o)?o.value=n:null),placeholder:"请输入","auto-size":{minRows:3}},null,8,["disabled","value"]),s(g,{class:"send",loading:a(t),type:"primary",onClick:b},{default:e(()=>[_("发送")]),_:1},8,["loading"])]),_:1})]),_:1})}}}),Q=Z(J,[["__scopeId","data-v-02e23119"]]);export{Q as default};
