import{r as C,q as G,s as K,aE as W,aF as Y,v as U,aG as Z,aH as ee,g as S,o as i,i as v,w as a,b as t,f as x,t as A,u as e,Y as te,d as T,C as D,y as ae,l as ne,j as F,aI as oe,aJ as le,I as L,H as se,an as ie,B as j,L as ue,ao as _e,ap as z,c as k,J as de,N as re,O as ce,P as pe,Q as me,U as fe,a6 as ge,ak as ve,aq as ye,F as E,k as V,ag as be,V as X,ar as ke,D as he,m as xe,n as Ce,_ as we,a0 as $e,a2 as Ie,h as Se}from"./index-DrWGRGWo.js";import{F as De}from"./Field-CUE4F3cL.js";import{_ as Oe}from"./ExportOutlined-CfR2DrQu.js";import{O as ze,A as Ne}from"./OrderedListOutlined-CrLT9vqH.js";import{_ as Fe}from"./Operation.vue_vue_type_script_setup_true_lang-BsOu1TJ7.js";import"./FilterOutlined-JbdMlQF8.js";const I=C(!1),H={memoId:0,title:"",value:"",description:"",extra:"",userId:0,deptId:0,createTime:"",updateTime:"",type:"1"},f=C({...H}),Be=()=>{f.value={...H}},Me={title:[{required:!0,trigger:"change"}],value:[{required:!0,trigger:"change"}],description:[{required:!1,trigger:"change"}],extra:[{required:!1,trigger:"change"}]},y=C({rowKey:"memoId",data:[],loading:!1,moduleName:"memo"}),N=C("table"),g=C({pageNum:1,pageSize:10,total:0,title:"",value:"",description:"",type:"1"}),r=C([]),Re=[{label:"删除",key:"delete",icon:G(K),async onClick(){await J(),h()}}],h=async()=>{y.value.loading=!0;const{data:l}=await W(g.value);y.value.data=l.rows,g.value.total=l.total,y.value.loading=!1},B=async l=>{let s=l||r.value[0];y.value.loading=!0;const{data:o}=await Y(s);o.data&&(f.value=o.data,I.value=!0),y.value.loading=!1},Ue=async()=>{Be(),I.value=!0},J=async l=>{let s=l?[l]:r.value;await U(ee,s),await h(),r.value=[]},Ae=()=>Z({pageNum:g.value.pageNum,pageSize:g.value.pageSize}),Te=x("span",null,"已选:",-1),qe=S({__name:"AXFooter",setup(l){const s=(o,c)=>{g.value.pageNum=o,g.value.pageSize=c,h()};return(o,c)=>{const n=te,_=T,d=D;return i(),v(d,{bordered:!1,bodyStyle:{padding:"4px 12px"},class:"card__footer"},{default:a(()=>[t(_,{justify:"space-between",align:"center"},{default:a(()=>[x("div",null,[Te,x("span",null,"（"+A(e(r).length)+"）",1)]),t(n,{total:e(g).total,current:e(g).pageNum,"page-size":e(g).pageSize,"show-size-changer":"",onChange:s,"show-quick-jumper":"","show-less-items":""},null,8,["total","current","page-size"])]),_:1})]),_:1})}}}),Ee=[{label:"备忘录",value:"1"},{label:"记事本",value:"2"}],Ve=S({__name:"AXForm",setup(l){const s=C(!1),o=async()=>{s.value=!0,f.value.memoId?await U(oe,f.value):await U(le,f.value),await h(),s.value=!1,I.value=!1};return(c,n)=>{const _=L,d=se,b=ie,p=j,m=D,w=ue;return i(),v(w,{rules:e(Me),model:e(f),onFinish:o,"wrapper-col":{span:8,offset:1},"label-col":{span:4,offset:4}},{default:a(()=>[t(ae,{title:"备忘录",visible:e(I),"onUpdate:visible":n[4]||(n[4]=u=>ne(I)?I.value=u:null)},{default:a(()=>[t(m,{title:"编辑/新增"},{extra:a(()=>[t(p,{htmlType:"submit",type:"primary",loading:e(s),block:""},{default:a(()=>[F("保存")]),_:1},8,["loading"])]),default:a(()=>[t(d,{label:"备忘录标题",name:"title"},{default:a(()=>[t(_,{placeholder:"请输入备忘录标题",value:e(f).title,"onUpdate:value":n[0]||(n[0]=u=>e(f).title=u)},null,8,["value"])]),_:1}),t(d,{label:"备忘录的值",name:"value"},{default:a(()=>[t(b,{"auto-size":{minRows:6},placeholder:"请输入备忘录的值",value:e(f).value,"onUpdate:value":n[1]||(n[1]=u=>e(f).value=u)},null,8,["value"])]),_:1}),t(d,{label:"备忘录描述",name:"description"},{default:a(()=>[t(_,{placeholder:"请输入备忘录描述",value:e(f).description,"onUpdate:value":n[2]||(n[2]=u=>e(f).description=u)},null,8,["value"])]),_:1}),t(d,{label:"附加值",name:"extra"},{default:a(()=>[t(_,{placeholder:"请输入附加值",value:e(f).extra,"onUpdate:value":n[3]||(n[3]=u=>e(f).extra=u)},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["visible"])]),_:1},8,["rules","model"])}}}),q=C([{title:"备忘录标题",dataIndex:"title"},{title:"备忘录的值",dataIndex:"value"},{title:"备忘录描述",dataIndex:"description"},{title:"附加值",dataIndex:"extra"}]),Ke=x("h3",{class:"text-14"},"备忘录",-1),Le=S({__name:"AXHead",setup(l){return(s,o)=>{const c=L,n=de,_=j,d=T,b=re,p=ce,m=pe,w=me,u=Oe,M=K,P=fe,Q=D,O=_e("perm");return i(),v(Q,{class:"table__head"},{title:a(()=>[Ke]),default:a(()=>[t(d,{class:"mb-12",gap:12,wrap:"wrap"},{default:a(()=>[x("div",null,[t(c,{onBlur:e(h),value:e(g).title,"onUpdate:value":o[0]||(o[0]=$=>e(g).title=$),style:{width:"160px"},placeholder:"请输入备忘录标题","allow-clear":""},null,8,["onBlur","value"])]),x("div",null,[t(n,{onChange:e(h),options:e(Ee),value:e(g).type,"onUpdate:value":o[1]||(o[1]=$=>e(g).type=$)},null,8,["onChange","options","value"])]),t(_,{type:"primary",onClick:e(h)},{default:a(()=>[F("搜索")]),_:1},8,["onClick"])]),_:1}),t(d,{justify:"space-between",align:"center"},{default:a(()=>[t(d,{justify:"space-between",align:"center"},{default:a(()=>[t(d,{align:"center",gap:4},{default:a(()=>[z((i(),k("div",null,[t(p,{title:"新建"},{default:a(()=>[t(_,{type:"primary",onClick:e(Ue)},{default:a(()=>[t(b)]),_:1},8,["onClick"])]),_:1})])),[[O,"system:memo:add"]]),z((i(),k("div",null,[t(p,{title:"编辑"},{default:a(()=>[t(_,{type:"link",onClick:o[2]||(o[2]=$=>e(B)()),disabled:e(r).length!==1},{default:a(()=>[t(m)]),_:1},8,["disabled"])]),_:1})])),[[O,"system:memo:edit"]]),t(p,{title:"刷新"},{default:a(()=>[t(_,{type:"link",onClick:e(h)},{default:a(()=>[t(w)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),t(d,null,{default:a(()=>[z((i(),k("div",null,[t(p,{title:"导出"},{default:a(()=>[t(_,{type:"link",onClick:e(Ae)},{default:a(()=>[t(u)]),_:1},8,["onClick"])]),_:1})])),[[O,"system:memo:export"]]),z((i(),k("div",null,[t(P,{title:"确定要删除吗",disabled:e(r).length===0,placement:"bottomRight",onConfirm:o[3]||(o[3]=$=>e(J)())},{default:a(()=>[t(p,{title:"批量删除"},{default:a(()=>[t(_,{danger:"",type:"link",disabled:e(r).length===0},{default:a(()=>[t(M)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["disabled"])])),[[O,"system:memo:remove"]]),t(De,{columns:e(q),"module-name":e(y).moduleName},null,8,["columns","module-name"]),x("div",null,[e(N)==="table"?(i(),v(p,{key:0,title:"卡片模式",onClick:o[4]||(o[4]=$=>N.value="card")},{default:a(()=>[t(_,{type:"link"},{default:a(()=>[t(e(ze))]),_:1})]),_:1})):(i(),v(p,{key:1,title:"表格模式",onClick:o[5]||(o[5]=$=>N.value="table")},{default:a(()=>[t(_,{type:"link"},{default:a(()=>[t(e(Ne))]),_:1})]),_:1}))])]),_:1})]),_:1})]),_:1})}}}),je=l=>{console.log("dragstart==",l.id)},Xe=l=>{console.log("drop==",l.id)},He=l=>{r.value.includes(l.id)?r.value=r.value.filter(s=>s!==l.id):r.value.push(l.id)},R=ge(()=>{let l=[];return y.value.data.map((s,o)=>{let c=[];q.value.forEach((n,_)=>{const d=n.title,b=s[n.dataIndex];n.dataIndex!=="operation"&&c.push({label:d,value:b})}),l.push({id:s.memoId,items:c,raw:s})}),l}),Je={key:0},Pe=["onClick","onDblclick","onDragstart","onDrop"],Qe={key:0,class:"active"},Ge=S({__name:"AXCard",setup(l){const s=C();return ve(()=>{ye(s,R.value,{animation:200,onUpdate(o){}})}),(o,c)=>{const n=ke,_=he,d=xe,b=D,p=Ce;return i(),v(b,{class:"table__card",bordered:!1,"body-style":{padding:"0"}},{default:a(()=>[e(R).length>0?(i(),k("div",Je,[x("ul",{class:"table_card_list flex-1",ref_key:"cardRef",ref:s},[(i(!0),k(E,null,V(e(R),(m,w)=>(i(),k("li",{key:w,size:"small",onClick:u=>e(He)(m),class:be({active:e(r).includes(m.id)}),onDblclick:u=>e(B)(m.id),draggable:!0,onDragstart:u=>e(je)(m),onDrop:u=>e(Xe)(m),onDragover:c[0]||(c[0]=u=>u.preventDefault())},[t(b,null,{default:a(()=>[e(r).includes(m.id)?(i(),k("div",Qe,A(w+1),1)):X("",!0),t(n,{title:m.items[0].value,class:"mb-8"},{description:a(()=>[F("详细信息")]),_:2},1032,["title"]),t(d,{column:1,layout:"horizontal",labelStyle:{width:"80px",color:"#666"}},{default:a(()=>[(i(!0),k(E,null,V(m.items,(u,M)=>(i(),v(_,{label:u.label,contentStyle:{fontWeight:M===0?"bold":""}},{default:a(()=>[F(A(u.value),1)]),_:2},1032,["label","contentStyle"]))),256))]),_:2},1024)]),_:2},1024)],42,Pe))),128))],512)])):(i(),v(p,{key:1,description:"广告位"}))]),_:1})}}}),We=we(Ge,[["__scopeId","data-v-0d55c06a"]]),Ye=S({__name:"AXTable",setup(l){const s=n=>{f.value=n},o=n=>({onClick(){r.value=[n.memoId]},onDblclick(){B(n.memoId)}}),c=(n,_,d)=>{g.value.pageNum=n.current,g.value.pageSize=n.pageSize};return(n,_)=>{const d=Ie,b=D;return i(),v(b,{style:{boxShadow:"none"},bordered:!1,bodyStyle:{padding:"0"}},{default:a(()=>[t(d,{onChange:c,"table-layout":"fixed",sticky:"",loading:e(y).loading,"row-selection":{selectedRowKeys:e(r),onChange:p=>r.value=p},pagination:!1,customRow:o,rowKey:e(y).rowKey,columns:e($e)(e(q)),"data-source":e(y).data},{bodyCell:a(({column:p,record:m})=>[p.key==="operation"?(i(),v(Fe,{key:0,loading:e(y).loading,onOpenChange:w=>s(m),onOnClick:w=>e(B)(m.memoId),items:e(Re)},null,8,["loading","onOpenChange","onOnClick","items"])):X("",!0)]),_:1},8,["loading","row-selection","rowKey","columns","data-source"])]),_:1})}}}),Ze={class:"data__content"},st=S({__name:"index",setup(l){return Se(async()=>{await h()}),(s,o)=>{const c=T,n=D;return i(),v(n,{class:"system__template","body-style":{height:"100%",overflow:"hidden",paddingBottom:"0"}},{default:a(()=>[t(c,{vertical:"",class:"h-100"},{default:a(()=>[t(Le),x("div",Ze,[e(N)==="table"?(i(),v(Ye,{key:0})):(i(),v(We,{key:1}))]),t(qe),t(Ve)]),_:1})]),_:1})}}});export{st as default};
