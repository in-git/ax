import{g as f,ab as q,o as _,i as g,w as n,a1 as B,b as e,j as N,B as w,C as I,_ as L,r as d,y as U,u as t,l as b,f as $,L as V,a as S,q as M,s as D,Q as j,O as T,R as O,T as R,d as Y,h as K,c as C,F as H,t as Q,ac as z,V as A,M as E}from"./index-BKuZjElQ.js";import{_ as P}from"./SystemTable.vue_vue_type_script_setup_true_lang-q25kBky5.js";import{F as G}from"./Field-CAXwbqSR.js";import{_ as J}from"./LogoutOutlined-D-O8uM4J.js";import"./FilterOutlined-DwkC-MSK.js";const W=f({__name:"FormFooter",props:{justify:{default:"left"},position:{default:"sticky"},loading:{type:Boolean}},setup(s){return q(i=>({"1f4f7342":i.position,"11ad2d52":i.justify})),(i,o)=>{const a=w,u=I;return _(),g(u,{class:"form__footer flex"},{default:n(()=>[B(i.$slots,"default",{},()=>[e(a,{type:"primary",loading:i.loading,htmlType:"submit"},{default:n(()=>[N("保存")]),_:1},8,["loading"])],!0)]),_:3})}}}),X=L(W,[["__scopeId","data-v-2ddab699"]]),h=d(!1),Z={},ee=d({...Z}),te={class:"h-100 flex flex-col"},oe=$("div",{class:"flex-1 p-8"}," Lorem ipsum dolor sit amet consectetur, adipisicing elit. Atque excepturi nesciunt cupiditate vero fugit exercitationem eius voluptas a, expedita placeat nobis quas labore libero, provident officiis ratione sint quaerat laboriosam? ",-1),ne=f({__name:"form",setup(s){return(i,o)=>{const a=X,u=V;return _(),g(u,{model:t(ee)},{default:n(()=>[e(U,{title:"Untitled",visible:t(h),"onUpdate:visible":o[0]||(o[0]=m=>b(h)?h.value=m:null)},{default:n(()=>[$("div",te,[oe,e(a)])]),_:1},8,["visible"])]),_:1},8,["model"])}}}),y=d([{title:"令牌ID",dataIndex:"tokenId",show:!0},{title:"部门名称",dataIndex:"deptName",show:!0},{title:"用户名",dataIndex:"userName",show:!0},{title:"IP地址",dataIndex:"ipaddr",show:!0},{title:"登录位置",dataIndex:"loginLocation",show:!0},{title:"浏览器",dataIndex:"browser",show:!0},{title:"操作系统",dataIndex:"os",show:!0},{title:"登录时间",dataIndex:"loginTime",show:!0}]),ae=s=>S.get("monitor/online/list",{params:s}),se=s=>S.delete(`monitor/online/${s}`),v=d({rowKey:"tokenId",data:[],loading:!1,moduleName:"menu"}),r=d({pageNum:1,pageSize:10,total:0,ipaddr:"",userName:""}),k=d([]);M(D);const c=async()=>{v.value.loading=!0;const{data:s}=await ae(r.value);v.value.data=s.rows,r.value.total=s.total,v.value.loading=!1},le=$("h3",{class:"text-14"},"在线用户",-1),ie=f({__name:"head",setup(s){return(i,o)=>{const a=w,u=T,m=O,x=R,l=Y,F=I;return _(),g(F,{class:"table__head"},{title:n(()=>[le]),default:n(()=>[e(l,{justify:"space-between",align:"center"},{default:n(()=>[e(l,{gap:4,align:"center"},{default:n(()=>[e(u,{title:"刷新"},{default:n(()=>[e(a,{type:"link",onClick:t(c)},{default:n(()=>[e(t(j))]),_:1},8,["onClick"])]),_:1}),e(m,{type:"vertical"}),e(x,{placeholder:"请输入登录地址","allow-clear":"",onSearch:t(c),value:t(r).ipaddr,"onUpdate:value":o[0]||(o[0]=p=>t(r).ipaddr=p)},null,8,["onSearch","value"]),e(x,{placeholder:"请输入用户名","allow-clear":"",onSearch:t(c),value:t(r).userName,"onUpdate:value":o[1]||(o[1]=p=>t(r).userName=p)},null,8,["onSearch","value"])]),_:1}),e(G,{"module-name":"online",columns:t(y),"onUpdate:columns":o[2]||(o[2]=p=>b(y)?y.value=p:null)},null,8,["columns"])]),_:1})]),_:1})}}}),re=f({__name:"table",setup(s){const i=o=>{E.confirm({title:"提示",content:"确定要强制下线吗？",okText:"确定",cancelText:"取消",centered:!0,onOk:()=>{se(o).then(()=>{c()})}})};return K(()=>{c()}),(o,a)=>{const u=J,m=w,x=T;return _(),C("div",null,[e(ie),e(P,{columns:t(y),table:t(v),query:t(r),"onUpdate:query":a[0]||(a[0]=l=>b(r)?r.value=l:null),"selected-keys":t(k),"onUpdate:selectedKeys":a[1]||(a[1]=l=>b(k)?k.value=l:null),onReload:t(c),class:"mt-12"},{default:n(({value:l})=>[l.column.dataIndex==="operation"?(_(),g(x,{key:0,title:"强制下线"},{default:n(()=>[e(m,{type:"text",danger:"",onClick:F=>i(l.record.tokenId)},{default:n(()=>[e(u)]),_:2},1032,["onClick"])]),_:2},1024)):l.column.dataIndex==="loginTime"?(_(),C(H,{key:1},[N(Q(t(z)(l.record.loginTime,"YYYY-MM-DD HH:mm:ss").value),1)],64)):A("",!0)]),_:1},8,["columns","table","query","selected-keys","onReload"])])}}}),pe=f({__name:"index",setup(s){return(i,o)=>{const a=I;return _(),g(a,{class:"system__module"},{default:n(()=>[e(re),e(ne)]),_:1})}}});export{pe as default};
