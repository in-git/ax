import{_ as P}from"./Loading-CjArYprD.js";import{a as k,r as S,g as x,o as u,c as g,b as e,w as n,u as t,j as E,ad as V,f as c,a7 as B,B as N,ae as R,d as z,s as j,U as A,Y as U,C as $,p as F,e as H,_ as L,af as d,h as M,F as O,k as Q,ag as W,t as y,i as I,W as X,D as Y,m as q,X as G,n as J}from"./index-BKuZjElQ.js";const K=o=>k.get("monitor/operlog/list",{params:o}),Z=()=>k.delete("monitor/operlog/clean"),_=S({pageNum:1,pageSize:25,businessType:"",status:"",total:0,params:void 0}),v=S({data:[],loading:!1}),f=async()=>{v.value.loading=!0;const{data:o}=await K(_.value);v.value.data=o.rows,v.value.loading=!1,_.value.total=o.total},ee=[{label:"选择操作类型",value:""},{label:"新增",value:"1"},{label:"修改",value:"2"},{label:"删除",value:"3"},{label:"授权",value:"4"},{label:"导出",value:"5"},{label:"强退",value:"6"},{label:"生成代码",value:"7"}],te=o=>(F("data-v-bddefa8a"),o=o(),H(),o),se={class:"table__head"},ae=te(()=>c("span",null,"状态",-1)),oe={class:"flex gc-4"},ne={class:"flex justify-right mt-12"},le=x({__name:"OperlogHead",setup(o){const i=async()=>{const{data:l}=await Z();B.success(l.msg),f()},m=(l,s)=>{_.value.pageNum=l,_.value.pageSize=s,f()};return(l,s)=>{const h=N,r=R,p=z,b=j,C=A,T=U,w=$;return u(),g("div",se,[e(w,{title:"操作日志"},{default:n(()=>[e(p,{justify:"space-between",align:"center"},{default:n(()=>[e(p,{gap:8,align:"center"},{default:n(()=>[e(h,{onClick:t(f),type:"primary"},{default:n(()=>[E("刷新")]),_:1},8,["onClick"]),e(r,{style:{width:"120px"},options:t(ee),value:t(_).businessType,"onUpdate:value":s[0]||(s[0]=a=>t(_).businessType=a),placeholder:"选择操作类型",allowClear:"",onChange:t(f)},null,8,["options","value","onChange"]),ae,e(r,{style:{width:"120px"},onChange:t(f),value:t(_).status,"onUpdate:value":s[1]||(s[1]=a=>t(_).status=a),options:t(V),allowClear:""},null,8,["onChange","value","options"])]),_:1}),c("div",oe,[e(C,{title:"将会清空所有日志",onConfirm:i,placement:"bottomRight"},{default:n(()=>[e(h,{danger:""},{default:n(()=>[e(b)]),_:1})]),_:1})])]),_:1}),c("div",ne,[e(T,{onChange:m,current:t(_).pageNum,"onUpdate:current":s[2]||(s[2]=a=>t(_).pageNum=a),total:t(_).total,"show-less-items":"","page-size":t(_).pageSize},null,8,["current","total","page-size"])])]),_:1})])}}}),_e=L(le,[["__scopeId","data-v-bddefa8a"]]),ce="/ax/assets/error-BjBCP5Ey.png",re=["src"],pe=x({__name:"ImageType",props:{type:{}},setup(o){const i=Object.assign({"../../assets/auth(4).png":()=>d(()=>import("./auth(4)-B26gMM_Q.js"),[]),"../../assets/code(7).png":()=>d(()=>import("./code(7)-CrtuZNue.js"),[]),"../../assets/create(1).png":()=>d(()=>import("./create(1)-Dehi9uny.js"),[]),"../../assets/delete(3).png":()=>d(()=>import("./delete(3)-DawYgItT.js"),[]),"../../assets/export(5).png":()=>d(()=>import("./export(5)-FpwlPqjR.js"),[]),"../../assets/logout(6).png":()=>d(()=>import("./logout(6)-IZqe6Ehs.js"),[]),"../../assets/update(2).png":()=>d(()=>import("./update(2)-yFqwrEwa.js"),[])}),m=/\((\d+)\)\.png/,l=[];Object.keys(i).map(r=>{l.push({index:Number(r.match(m)[1]||"-1"),src:new URL(r,import.meta.url).href})});const s=o,h=()=>{var r;return((r=l.find(p=>{if(p.index===s.type)return p}))==null?void 0:r.src)||ce};return(r,p)=>(u(),g("div",null,[c("img",{src:h(),width:"32"},null,8,re)]))}}),ue={class:"operlog-table h-100 flex flex-col"},ie={key:0},de=["onClick"],ge={class:"flex flex-col justify-between"},me={class:"text-16 mb-4 title"},fe={class:"system-subtitle text-12"},ve={style:{"line-height":"18px"}},he={class:"text-12"},ye=x({__name:"OperlogTable",setup(o){const i=S();M(async()=>{await f()});const m=s=>{i.value=s},l=s=>s==="1"?{color:"red",text:"err"}:{color:"green",text:"run"};return(s,h)=>{const r=X,p=Y,b=q,C=G,T=J,w=$;return u(),g("div",ue,[e(_e),e(w,{class:"data flex-1"},{default:n(()=>[t(v).loading?(u(),I(P,{key:1,class:"w-100 h-100"})):(u(),g(O,{key:0},[t(v).data.length>0?(u(),g("ul",ie,[(u(!0),g(O,null,Q(t(v).data,(a,D)=>(u(),g("li",{class:W(["card",{active:a===t(i)}]),key:D,onClick:be=>m(a)},[e(C,{class:"w-100 text-center",direction:"vertical"},{default:n(()=>[c("div",null,[e(pe,{type:a.businessType},null,8,["type"])]),c("div",null,[c("div",ge,[c("div",me,y(a.title),1),c("div",fe,y(a.operTime),1)])]),c("div",null,[e(b,{column:3,size:"small",layout:"vertical",labelStyle:{color:"#999"},contentStyle:{fontSize:"12px"}},{default:n(()=>[e(p,{label:"Status"},{default:n(()=>[c("div",ve,[e(r,{color:l(`${a.status}`).color},null,8,["color"]),c("span",he,y(l(`${a.status}`).text),1)])]),_:2},1024),e(p,{label:"Stuff"},{default:n(()=>[E(y(a.operName),1)]),_:2},1024),e(p,{label:"Time "},{default:n(()=>[E(y(a.costTime)+"ms",1)]),_:2},1024)]),_:2},1024)])]),_:2},1024)],10,de))),128))])):(u(),I(T,{key:1}))],64))]),_:1})])}}}),xe=L(ye,[["__scopeId","data-v-694cc63d"]]),we=x({__name:"index",setup(o){return(i,m)=>{const l=$;return u(),I(l,{class:"system__module"},{default:n(()=>[e(xe)]),_:1})}}});export{we as default};
