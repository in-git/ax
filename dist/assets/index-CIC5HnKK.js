import{_ as F}from"./FormFooter-5NEaOLHv.js";import{a as o,A as $,r as m,d as b,o as d,e as O,w as u,S as T,u as n,i as x,f as k,F as q,g as S,h as B,j as M,p as U,B as L,m as C,q as D,s as P,v as j,c as w,y as A,K as H,C as V,M as Y,x as z,N as R}from"./index-HxNFWFwR.js";import{_ as E}from"./SystemTable.vue_vue_type_script_setup_true_lang-1XGIZ7ZX.js";import{_ as K}from"./TableHead-D-Q4jVMf.js";import{F as Q}from"./Field-Vd8OBjEs.js";var G={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 732h-70.3c-4.8 0-9.3 2.1-12.3 5.8-7 8.5-14.5 16.7-22.4 24.5a353.84 353.84 0 01-112.7 75.9A352.8 352.8 0 01512.4 866c-47.9 0-94.3-9.4-137.9-27.8a353.84 353.84 0 01-112.7-75.9 353.28 353.28 0 01-76-112.5C167.3 606.2 158 559.9 158 512s9.4-94.2 27.8-137.8c17.8-42.1 43.4-80 76-112.5s70.5-58.1 112.7-75.9c43.6-18.4 90-27.8 137.9-27.8 47.9 0 94.3 9.3 137.9 27.8 42.2 17.8 80.1 43.4 112.7 75.9 7.9 7.9 15.3 16.1 22.4 24.5 3 3.7 7.6 5.8 12.3 5.8H868c6.3 0 10.2-7 6.7-12.3C798 160.5 663.8 81.6 511.3 82 271.7 82.6 79.6 277.1 82 516.4 84.4 751.9 276.2 942 512.4 942c152.1 0 285.7-78.8 362.3-197.7 3.4-5.3-.4-12.3-6.7-12.3zm88.9-226.3L815 393.7c-5.3-4.2-13-.4-13 6.3v76H488c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h314v76c0 6.7 7.8 10.5 13 6.3l141.9-112a8 8 0 000-12.6z"}}]},name:"logout",theme:"outlined"};const J=G;function N(t){for(var a=1;a<arguments.length;a++){var e=arguments[a]!=null?Object(arguments[a]):{},l=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(e).filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable}))),l.forEach(function(s){W(t,s,e[s])})}return t}function W(t,a,e){return a in t?Object.defineProperty(t,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[a]=e,t}var I=function(a,e){var l=N({},a,e.attrs);return o($,N({},l,{icon:J}),null)};I.displayName="LogoutOutlined";I.inheritAttrs=!1;const X=I,h=m(!1),Z={},ee=m({...Z}),te={class:"h-100 flex flex-col"},ne=k("div",{class:"flex-1 p-8"}," Lorem ipsum dolor sit amet consectetur, adipisicing elit. Atque excepturi nesciunt cupiditate vero fugit exercitationem eius voluptas a, expedita placeat nobis quas labore libero, provident officiis ratione sint quaerat laboriosam? ",-1),oe=b({__name:"form",setup(t){return(a,e)=>{const l=F,s=q;return d(),O(s,{model:n(ee)},{default:u(()=>[o(T,{title:"Untitled",visible:n(h),"onUpdate:visible":e[0]||(e[0]=p=>x(h)?h.value=p:null)},{default:u(()=>[k("div",te,[ne,o(l)])]),_:1},8,["visible"])]),_:1},8,["model"])}}}),g=m([{title:"令牌ID",dataIndex:"tokenId",show:!0},{title:"部门名称",dataIndex:"deptName",show:!0},{title:"用户名",dataIndex:"userName",show:!0},{title:"IP地址",dataIndex:"ipaddr",show:!0},{title:"登录位置",dataIndex:"loginLocation",show:!0},{title:"浏览器",dataIndex:"browser",show:!0},{title:"操作系统",dataIndex:"os",show:!0},{title:"登录时间",dataIndex:"loginTime",show:!0}]),ae=t=>S.get("monitor/online/list",{params:t}),le=t=>S.delete(`monitor/online/${t}`),v=m({rowKey:"tokenId",data:[],loading:!1,moduleName:"menu"}),i=m({pageNum:1,pageSize:10,total:0,ipaddr:"",userName:""}),y=m([]);B(M);const _=async()=>{v.value.loading=!0;const{data:t}=await ae(i.value);v.value.data=t.rows,i.value.total=t.total,v.value.loading=!1},se={class:"flex gc-4 align-center"},re=b({__name:"head",setup(t){return(a,e)=>{const l=L,s=C,p=D,f=P,r=K;return d(),O(r,{title:"在线用户"},{default:u(()=>[k("div",se,[o(s,{title:"刷新"},{default:u(()=>[o(l,{type:"link",onClick:n(_)},{default:u(()=>[o(n(U))]),_:1},8,["onClick"])]),_:1}),o(p,{type:"vertical"}),o(f,{placeholder:"请输入登录地址","allow-clear":"",onSearch:n(_),value:n(i).ipaddr,"onUpdate:value":e[0]||(e[0]=c=>n(i).ipaddr=c)},null,8,["onSearch","value"]),o(f,{placeholder:"请输入用户名","allow-clear":"",onSearch:n(_),value:n(i).userName,"onUpdate:value":e[1]||(e[1]=c=>n(i).userName=c)},null,8,["onSearch","value"])]),o(Q,{"module-name":"online",columns:n(g),"onUpdate:columns":e[2]||(e[2]=c=>x(g)?g.value=c:null)},null,8,["columns"])]),_:1})}}}),ie=b({__name:"table",setup(t){const a=e=>{R.confirm({title:"提示",content:"确定要强制下线吗？",okText:"确定",cancelText:"取消",centered:!0,onOk:()=>{le(e).then(()=>{_()})}})};return j(()=>{_()}),(e,l)=>{const s=X,p=L,f=C;return d(),w("div",null,[o(re),o(E,{columns:n(g),table:n(v),query:n(i),"onUpdate:query":l[0]||(l[0]=r=>x(i)?i.value=r:null),"selected-keys":n(y),"onUpdate:selectedKeys":l[1]||(l[1]=r=>x(y)?y.value=r:null),onReload:n(_)},{default:u(({value:r})=>[r.column.dataIndex==="operation"?(d(),O(f,{key:0,title:"强制下线"},{default:u(()=>[o(p,{type:"text",danger:"",onClick:c=>a(r.record.tokenId)},{default:u(()=>[o(s)]),_:2},1032,["onClick"])]),_:2},1024)):r.column.dataIndex==="loginTime"?(d(),w(A,{key:1},[H(V(n(Y)(r.record.loginTime,"YYYY-MM-DD HH:mm:ss").value),1)],64)):z("",!0)]),_:1},8,["columns","table","query","selected-keys","onReload"])])}}}),ue={class:"system-module"},fe=b({__name:"index",setup(t){return(a,e)=>(d(),w("div",ue,[o(ie),o(oe)]))}});export{fe as default};
