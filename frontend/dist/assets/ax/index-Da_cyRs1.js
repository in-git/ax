import{f as B,c as w}from"./feedback-ByHxSiVJ.js";import{g as z,r as u,an as N,h as $,o as d,i as x,w as a,b as n,u as e,j as _,f as y,c as F,F as D,k as V,ao as q,t as p,l as A,B as L,Z as R,ap as T,C as U,d as j,S as E,aq as M,_ as Z}from"./index-JuZA7c1I.js";const G={vertical:"",class:"list flex-1"},H={class:"system__subtitle"},J=z({__name:"index",setup(K){const f=u([]),t=u(!1),o=u(""),c=N(),l=u({pageNum:1,pageSize:20,total:0,orderByColumn:"create_time",isAsc:"desc"}),i=async()=>{try{t.value=!0;const{data:r}=await B(l.value);f.value=r.rows,l.value.total=r.total,t.value=!1}catch{t.value=!1}},b=async()=>{t.value=!0,c.$state.userInfo&&(await w({feedbackContent:o.value,type:"",nickname:c.$state.userInfo.nickName||"匿名用户",deptId:c.$state.userInfo.deptId,avatar:c.$state.userInfo.avatar}),o.value="",i())};return $(()=>{i()}),(r,m)=>{const g=L,C=R,I=T,v=U,k=j,S=E,h=M;return d(),x(v,{class:"system__template"},{extra:a(()=>[n(g,{onClick:i,loading:e(t)},{default:a(()=>[_("刷新")]),_:1},8,["loading"])]),title:a(()=>[n(C,{current:e(l).pageNum,"page-size":e(l).pageSize,total:e(l).total},null,8,["current","page-size","total"])]),default:a(()=>[y("div",G,[n(S,{spinning:e(t)},{default:a(()=>[n(k,{vertical:"",gap:8},{default:a(()=>[(d(!0),F(D,null,V(e(f),s=>(d(),x(v,null,{title:a(()=>[n(I,{size:24,src:e(q)(`avatar/${s.avatar}`)},null,8,["src"]),_(" "+p(s.nickname),1)]),extra:a(()=>[y("span",H,p(s.createTime),1)]),default:a(()=>[_(" "+p(s.feedbackContent)+" ",1)]),_:2},1024))),256))]),_:1})]),_:1},8,["spinning"])]),n(k,{class:"relative"},{default:a(()=>[n(h,{maxlength:140,disabled:e(t),value:e(o),"onUpdate:value":m[0]||(m[0]=s=>A(o)?o.value=s:null),placeholder:"请输入","auto-size":{minRows:3}},null,8,["disabled","value"]),n(g,{class:"send",loading:e(t),type:"primary",onClick:b},{default:a(()=>[_("发送")]),_:1},8,["loading"])]),_:1})]),_:1})}}}),Q=Z(J,[["__scopeId","data-v-02e23119"]]);export{Q as default};
